<!-- markdownlint-disable MD024 MD025 -->

# Gaia API Documentation

> Version: 1

## `core`

| Resource                            | Description                                                                         |
| -                                   | -                                                                                   |
| [Comment](#comment)                 | Represents a comment from a user.                                                   |
| [Export](#export)                   | Export the policies and related objects in a given namespace.                       |
| [Import](#import)                   | Imports an export of policies and related objects into the namespace.               |
| [ImportReference](#importreference) | Import and keep a reference.                                                        |
| [ImportRequest](#importrequest)     | This API allows to send an import request to create objects to a namespace where... |
| [Poke](#poke)                       | When available, poke can be used to update various information about the parent.... |
| [PolicyRenderer](#policyrenderer)   | Render is a low level api that allows to render policies of given tyoe for a        |
| [Root](#root)                       | root object.                                                                        |
| [Search](#search)                   | Perform a full text search on the database.                                         |

### Comment

Represents a comment from a user.

#### Attributes

##### `claims` `[]string`

The claims of the author.

##### `content` `string`

The content of the comment.

##### `date` `time`

The date of the comment.

### Export

Export the policies and related objects in a given namespace.

#### Example

```json
{
  "identities": [
    "externalnetworks",
    "networkaccesspolicies"
  ],
  "label": "my-import-name"
}
```

#### Relations

##### `POST /export`

Exports all policies and related object of a namespace.

Parameters:

- `ignoredTags` (`string`): List of tags to ignore from the export.

#### Attributes

##### `APIVersion` `integer` [`autogenerated`,`read_only`]

APIVersion of the api used for the exported data.

##### `data` `map[string][]map[string]interface{}` [`autogenerated`]

List of all exported data.

##### `identities` `[]string`

The list of identities to export.

##### `label` `string`

Label allows to define a unique label for this export. When importing the
content of the export, this label will be added as a tag that will be used to
recognize imported object in a later import.

### Import

Imports an export of policies and related objects into the namespace.

#### Example

```json
{
  "data": {
    "externalnetworks": [
      {
        "associatedTags": [
          "ext:net=tcp"
        ],
        "description": "Represents all TCP traffic on any port",
        "entries": [
          "0.0.0.0/0"
        ],
        "name": "all-tcp",
        "protocols": [
          "tcp"
        ]
      },
      {
        "associatedTags": [
          "ext:net=udp"
        ],
        "description": "Represents all UDP traffic on any port",
        "entries": [
          "0.0.0.0/0"
        ],
        "name": "all-udp",
        "protocols": [
          "udp"
        ]
      }
    ],
    "networkaccesspolicies": [
      {
        "action": "Allow",
        "description": "Allows all communication from pu to pu, tcp and udp",
        "logsEnabled": true,
        "name": "allow-all-communication",
        "object": [
          [
            "$identity=processingunit"
          ],
          [
            "ext:net=tcp"
          ],
          [
            "ext:net=udp"
          ]
        ],
        "subject": [
          [
            "$identity=processingunit"
          ]
        ]
      }
    ]
  },
  "mode": "Import"
}
```

#### Relations

##### `POST /import`

Imports data from a previous export.

#### Attributes

##### `data` [`export`](#export) [`required`]

The data to import.

##### `mode` `emum(ReplacePartial | Import | Remove)`

How to import the data. ReplacePartial is deprecated and should be Import. Right
now the API considers both equivalent.

Default value:

```json
"Import"
```

### ImportReference

Import and keep a reference.

#### Example

```json
{
  "data": {
    "externalnetworks": [
      {
        "associatedTags": [
          "ext:net=tcp"
        ],
        "description": "Represents all TCP traffic on any port",
        "entries": [
          "0.0.0.0/0"
        ],
        "name": "all-tcp",
        "protocols": [
          "tcp"
        ]
      },
      {
        "associatedTags": [
          "ext:net=udp"
        ],
        "description": "Represents all UDP traffic on any port",
        "entries": [
          "0.0.0.0/0"
        ],
        "name": "all-udp",
        "protocols": [
          "udp"
        ]
      }
    ],
    "networkaccesspolicies": [
      {
        "action": "Allow",
        "description": "Allows all communication from pu to pu, tcp and udp",
        "logsEnabled": true,
        "name": "allow-all-communication",
        "object": [
          [
            "$identity=processingunit"
          ],
          [
            "ext:net=tcp"
          ],
          [
            "ext:net=udp"
          ]
        ],
        "subject": [
          [
            "$identity=processingunit"
          ]
        ]
      }
    ]
  },
  "name": "the name",
  "protected": false
}
```

#### Relations

##### `GET /importreferences`

Retrieves the list of import references.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `POST /importreferences`

Imports data from a previous export and keep a reference.

##### `DELETE /importreferences/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /importreferences/:id`

Retrieves the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `claims` `[]string` [`autogenerated`,`read_only`]

Contains the claims of the client that performed the import.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `data` [`export`](#export) [`required`]

The data to import.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### ImportRequest

This API allows to send an import request to create objects to a namespace where
the requester doesn't normally have the permission to do so (other than creating
import requests).

The requester must have the permission to create the request in his namespace
and the target namespace.

When the request is created, the status is set to `Draft`. The requester can
edit the content as much as he desires.
When he's ready to send the request, he must update the status to be
`Submitted`.
The request will then be moved to the target namespace.
At that point nobody can edit the content of the requests other than adding
comments.

The requestee will now see the request, and will either

- Set the status as `Approved`. This will create the objects in the target
  namespace.

- Set the status as `Rejected`. The request cannot be edited anymore and can be
  deleted.

- Set the status back as `Draft`. The request will go back to the requester
  namespace so he can make changes. Once the change are ready, the requester
  will set back the status as `Submitted`.

The `data` format is the same an `Export`.

#### Example

```json
{
  "data": {
    "networkaccesspolicies": [
      {
        "action": "Allow",
        "description": "Allows Acme to access service A",
        "logsEnabled": true,
        "name": "allow-acme",
        "object": [
          [
            "$identity=processingunit",
            "$namespace=/acme/prod",
            "app=query"
          ]
        ],
        "subject": [
          [
            "$identity=processingunit",
            "app=partner-data"
          ]
        ]
      }
    ]
  },
  "protected": false,
  "requesterClaims": [
    "@auth:realm=vince",
    "@auth:account=acme"
  ],
  "status": "Draft",
  "targetNamespace": "/acme/prod"
}
```

#### Relations

##### `GET /importrequests`

Retrieves the list of import requests.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `POST /importrequests`

Creates a new import request.

##### `DELETE /importrequests/:id`

Delete an existing import request.

##### `GET /importrequests/:id`

Retrieve a single existing import request.

##### `PUT /importrequests/:id`

Update an existing import request.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `comment` `string`

Post a new comment that will be added to the commentFeed.

##### `commentFeed` [`[]comment`](#comment) [`autogenerated`,`read_only`]

List of comments that have been added to that request.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `data` `map[string][]map[string]interface{}` [`required`]

The data to import.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `requesterClaims` `[]string` [`autogenerated`,`read_only`]

The identity claims of the requester. This will be populated by the control
plane.

##### `requesterNamespace` `string` [`autogenerated`,`read_only`]

The namespace from the request was created. This will be populated by the
control plane.

##### `status` `emum(Draft | Submitted | Approved | Rejected)`

The status of the request. The content of data can only be changed when the
status is set to `Draft` or `ChangeRequested`. When the status is changed to
`Submitted`, the request will move to the target namespace for validation.
If the Status is set to `Approved` the data will be created immediately.
If the status is set to `Rejected` the request cannot be changed anymore and can
be deleted.

Default value:

```json
"Draft"
```

##### `targetNamespace` `string` [`required`,`creation_only`]

The namespace where the request will be sent. The requester can set any
namespace but he needs to have an autorization to post the request in that
namespace.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### Poke

When available, poke can be used to update various information about the parent.
For instance, for enforcers, poke will be use as the heartbeat.

#### Relations

##### `GET /enforcers/:id/poke`

Sends a poke empty object. This is used to ensure an enforcer is up and running.

Parameters:

- `cpuload` (`float`): Deprecated.
- `enforcementStatus` (`enum`): If set, changes the enforcement status of the enforcer alongside with the poke.
- `forceFullPoke` (`boolean`): If set, it will trigger a full poke (slower).
- `memory` (`integer`): Deprecated.
- `processes` (`integer`): Deprecated.
- `sessionClose` (`boolean`): If set, terminates a session for an enforcer.
- `sessionID` (`string`): If set, sends the current session ID of an enforcer.
- `status` (`enum`): If set, changes the status of the enforcer alongside with the poke.
- `ts` (`time`): time of report. If not set, local server time will be used.
- `version` (`string`): If set, version of the current running enforcer.

##### `GET /processingunits/:id/poke`

Sends a poke empty object. This will send a snaphot of the pu to time series
database.

Parameters:

- `enforcementStatus` (`enum`): If set, changes the enforcement status of the processing unit alongside with the poke.
- `forceFullPoke` (`boolean`): If set, it will trigger a full poke (slower).
- `notify` (`boolean`): Can be sent to trigger a ProcessingUnitRefresh event that will be handled by the enforcer. If this is set, all other additional parameters will be ignored.
- `status` (`enum`): If set, changes the status of the processing unit alongside with the poke.
- `ts` (`time`): time of report. If not set, local server time will be used.

### PolicyRenderer

Render is a low level api that allows to render policies of given tyoe for a
given set of tags.

#### Example

```json
{
  "processMode": "Subject",
  "tags": [
    "a=a",
    "b=b"
  ],
  "type": "APIAuthorization"
}
```

#### Relations

##### `POST /policyrenderers`

Render a policy of a given type for a given set of tags.

#### Attributes

##### `policies` [`[]policyrule`](#policyrule) [`autogenerated`,`read_only`]

List of policies rendered for the given set of tags.

##### `processMode` `emum(Subject | Object)`

Define if the processMode should be using the object or subject. This only has
effect when rendering a SSHAuthorizationPolicy for now.

Default value:

```json
"Subject"
```

##### `tags` `[]string` [`required`]

List of tags of the object to render the hook policy for.

##### `type` `emum(APIAuthorization | EnforcerProfile | File | Hook | Infrastructure | NamespaceMapping | Network | ProcessingUnit | Quota | Syscall | TokenScope | SSHAuthorization | UserAccess)` [`required`]

Type of the policy to render.

### Search

Perform a full text search on the database.

#### Relations

##### `GET /search`

Perform a full text search on the database.

Parameters:

- `q` (`string`): search query.

Mandatory Parameters

`q`

#### Attributes

##### `object` `object` [`autogenerated`,`read_only`]

Contains the matched object.

##### `objectID` `string` [`autogenerated`,`read_only`]

Contains the ID of the match.

##### `objectIdentity` `string` [`autogenerated`,`read_only`]

Contains the identity of the match.

##### `objectNamespace` `string` [`autogenerated`,`read_only`]

Contains the namespace of the match.

##### `score` `float` [`autogenerated`,`read_only`]

Contains the score of the match.

## `core/account`

| Resource                        | Description                                                                  |
| -                               | -                                                                            |
| [Account](#account)             | This api allows to view and manage basic information about your account like |
| [Activate](#activate)           | Used to activate a pending account.                                          |
| [PasswordReset](#passwordreset) | Used to reset an account password.                                           |

### Account

This api allows to view and manage basic information about your account like
your name, password, enable 2 factor authentication.

#### Example

```json
{
  "OTPEnabled": false,
  "SSHCARenew": false,
  "accessEnabled": false,
  "company": "Acme",
  "email": "user@acme.com",
  "firstName": "John",
  "lastName": "Doe",
  "name": "acme"
}
```

#### Relations

##### `GET /accounts`

Retrieves all accounts. This is a private API that can only be done by the
system.

Parameters:

- `name` (`string`): internal parameters.
- `status` (`string`): internal parameters.
- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `POST /accounts`

Creates a new Account.

##### `DELETE /accounts/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /accounts/:id`

Retrieves the object with the given ID.

##### `PUT /accounts/:id`

Updates the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `OTPEnabled` `boolean`

Set to enable or disable two factor authentication.

##### `OTPQRCode` `string` [`autogenerated`,`read_only`]

Returns the base64 encoded QRCode for setting up 2 factor auth.

##### `SSHCA` `string` [`autogenerated`,`read_only`]

SSHCA holds the eventual SSH authority used by the account namespace.

##### `SSHCARenew` `boolean`

If enabled, renew the SSH authority of the account namespace.

##### `accessEnabled` `boolean`

AccessEnabled defines if the account holder should have access to the systems.

##### `activationToken` `string` [`autogenerated`]

ActivationToken contains the activation token.

##### `associatedBillingID` `string`

associatedBillingID holds the ID of the associated billing customer.

##### `associatedPlanKey` `string` [`creation_only`]

AssociatedPlanKey contains the plan key that is associated to this account.

##### `company` `string`

Company of the account user.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `email` `string` [`required`]

Email of the account holder.

##### `firstName` `string`

First Name of the account user.

##### `lastName` `string`

Last Name of the account user.

##### `name` `string` [`required`,`creation_only`,`format=^[^\*\=]*$`]

Name of the account.

##### `password` `string`

Password for the account.

##### `reCAPTCHAKey` `string` [`creation_only`]

ReCAPTCHAKey contains the capcha validation if reCAPTCH is enabled.

##### `status` `emum(Active | Disabled | Invited | Pending)` [`autogenerated`,`read_only`]

Status of the account.

Default value:

```json
"Pending"
```

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### Activate

Used to activate a pending account.

#### Example

```json
{
  "token": "2BB3D52C-DE26-406A-8821-613F102282B0"
}
```

#### Relations

##### `GET /activate`

Activates a pending account.

Parameters:

- `noRedirect` (`boolean`): If set, do not redirect the request to the UI.
- `token` (`string`): Activation token.

Mandatory Parameters

`token`

#### Attributes

##### `token` `string` [`creation_only`]

Token contains the activation token.

### PasswordReset

Used to reset an account password.

#### Example

```json
{
  "password": "NewPassword123@",
  "token": "436676D4-7ECA-4853-A572-0644EE9D89EF"
}
```

#### Relations

##### `GET /passwordreset`

Sends a link to the account email to reset the password.

Parameters:

- `email` (`string`): Email associated to the account.

Mandatory Parameters

`email`

##### `POST /passwordreset`

Resets the password for an account using the provided link.

#### Attributes

##### `password` `string` [`required`]

Password contains the new password.

##### `token` `string` [`required`]

Token contains the reset password token.

## `core/authentication`

| Resource                      | Description                                                                         |
| -                             | -                                                                                   |
| [Auth](#auth)                 | This API verifies if the given token is valid or not. If it is valid it will        |
| [AWSAccount](#awsaccount)     | Allows to bind an AWS account to your Aporeto account to allow auto registration... |
| [Issue](#issue)               | This API issues a new token according to given data.                                |
| [LDAPProvider](#ldapprovider) | Allows to declare a generic LDAP provider that can be used in exchange              |
| [OIDCProvider](#oidcprovider) | Allows to declare a generic OpenID Connect provider that can be used in exchange... |

### Auth

This API verifies if the given token is valid or not. If it is valid it will
return the claims of the token.

#### Relations

##### `GET /auth`

Verify the validity of a token.

Parameters:

- `token` (`string`): token to validate.

#### Attributes

##### `claims` `_claims` [`autogenerated`,`read_only`]

Claims are the claims.

### AWSAccount

Allows to bind an AWS account to your Aporeto account to allow auto registration
of enforcers running on EC2.

#### Example

```json
{
  "accessKeyID": "AKIAIOSFODNN7EXAMPLE",
  "region": "us-west-2",
  "secretAccessKey": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"
}
```

#### Relations

##### `GET /awsaccounts`

Retrieves the list of aws account bindings.

Parameters:

- `accountid` (`string`): Id of the account.
- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `POST /awsaccounts`

Creates a new aws account binding.

##### `DELETE /awsaccounts/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /awsaccounts/:id`

Retrieves the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `accessKeyID` `string` [`required`,`creation_only`]

AccessKeyID contains the aws access key ID. This is used to retrieve your
account id, and it is not stored.

##### `accessToken` `string` [`creation_only`]

AccessToken contains your aws access token. It is used to retrieve your account
id, and it not stored.

##### `accountID` `string` [`autogenerated`,`read_only`]

accountID contains your verified accound id.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `parentID` `string` [`autogenerated`,`read_only`]

ParentID contains the parent Vince account ID.

##### `parentName` `string` [`autogenerated`,`read_only`]

ParentName contains the name of the Vince parent Account.

##### `region` `string` [`required`,`creation_only`]

Region contains your the region where your AWS account is located.

##### `secretAccessKey` `string` [`required`,`creation_only`]

secretAccessKey contains the secret key. It is used to retrieve your account id,
and it is not stored.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### Issue

This API issues a new token according to given data.

#### Example

```json
{
  "metadata": {
    "vinceAccount": "acme",
    "vinceOTP": 665435,
    "vincePassword": "s3cr3t"
  },
  "realm": "Vince",
  "validity": "24h"
}
```

#### Relations

##### `POST /issue`

Issues a new token.

Parameters:

- `token` (`string`): Token to verify.

#### Attributes

##### `audience` `string`

If given, the issued token will only be valid from that namespace declared in
that value.

##### `data` `string`

_This attribute is deprecated_.

Data contains additional data. The value depends on the issuer type.

##### `metadata` `map[string]interface{}`

Metadata contains various additional information. Meaning depends on the realm.

##### `opaque` `map[string]string`

Opaque data that will be included in the issued token.

##### `quota` `integer`

Restricts the number of time the issued token should be used.

##### `realm` `emum(AWSIdentityDocument | AWSSecurityToken | Certificate | Google | LDAP | Vince | GCPIdentityToken | AzureIdentityToken | OIDC)` [`required`]

Realm is the authentication realm.

##### `token` `string` [`autogenerated`,`read_only`]

Token is the token to use for the registration.

##### `validity` `string`

Validity configures the max validity time for a token. If it is bigger than the
configured max validity, it will be capped.

Default value:

```json
"24h"
```

### LDAPProvider

Allows to declare a generic LDAP provider that can be used in exchange
for a Midgard token.

#### Example

```json
{
  "address": "ldap.company.com",
  "baseDN": "dc=universe,dc=io",
  "bindDN": "cn=readonly,dc=universe,dc=io",
  "bindPassword": "s3cr3t",
  "bindSearchFilter": "uid={USERNAME}",
  "certificateAuthority": "-----BEGIN CERTIFICATE-----
MIIBPzCB5qADAgECAhEAwbx3c+QW24ePXyD94geytzAKBggqhkjOPQQDAjAPMQ0w
CwYDVQQDEwR0b3RvMB4XDTE5MDIyMjIzNDA1MFoXDTI4MTIzMTIzNDA1MFowDzEN
MAsGA1UEAxMEdG90bzBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABJi6CwRDeKks
Xb3pDEslmFGR7k9Aeh5RK+XmdqKKPGb3NQWEFPGolnqOR34iVuf7KSxTuzaaVWfu
XEa94faUQEqjIzAhMA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8EBTADAQH/MAoG
CCqGSM49BAMCA0gAMEUCIQD+nL9RF9EvQXHyYuJ31Lz9yWd9hsK91stnpAs890gS
/AIgQIKjBBpiyQNZZWso5H04qke9QYMVPegiQQufFFBj32c=
-----END CERTIFICATE-----",
  "connSecurityProtocol": "InbandTLS",
  "default": false,
  "name": "the name",
  "protected": false,
  "subjectKey": "uid"
}
```

#### Relations

##### `GET /ldapproviders`

Retrieves the list of the account LDAP providers.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `POST /ldapproviders`

Creates a new LDAP provider.

##### `DELETE /ldapproviders/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /ldapproviders/:id`

Retrieves the object with the given ID.

##### `PUT /ldapproviders/:id`

Updates the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `address` `string` [`required`]

Address holds the account authentication account's private LDAP server.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `baseDN` `string` [`required`]

BaseDN holds the base DN to use to LDAP queries.

##### `bindDN` `string` [`required`]

BindDN holds the account's internal LDAP bind DN for querying auth.

##### `bindPassword` `string` [`required`]

BindPassword holds the password to the LDAP bind DN.

##### `bindSearchFilter` `string`

BindSearchFilter holds filter to be used to uniquely search a user. For
Windows based systems, value may be `sAMAccountName={USERNAME}`. For Linux and
other systems, value may be `uid={USERNAME}`.

Default value:

```json
"uid={USERNAME}"
```

##### `certificateAuthority` `string`

CertificateAuthority contains the optional certificate authority that will
be used to connect to the LDAP server. It is not needed if the TLS certificate
of the LDAP is issued from a public truster CA.

##### `connSecurityProtocol` `emum(TLS | InbandTLS)`

ConnSecurityProtocol holds the connection type for the LDAP provider.

Default value:

```json
"InbandTLS"
```

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `default` `boolean`

If set, this will be the default LDAP provider. There can be only one default
provider in your account. When logging in with LDAP, if no provider name is
given, the default will be used.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `ignoredKeys` `[]string`

IgnoredKeys holds a list of keys that must not be imported into Aporeto
authorization system.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `subjectKey` `string`

SubjectKey holds key to be used to populate the subject. If you want to
use the user as a subject, for Windows based systems you may use
'sAMAccountName' and for Linux and other systems, value may be 'uid'. You can
also use any alternate key.

Default value:

```json
"uid"
```

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### OIDCProvider

Allows to declare a generic OpenID Connect provider that can be used in exchange
for a Midgard token.

#### Example

```json
{
  "clientID": "6195189841830-0644ee9d89ef0644ee9d89examle.apps.googleusercontent.com",
  "clientSecret": "Ytgbfjtj4652jHDFGls99jF",
  "default": false,
  "endpoint": "https://accounts.google.com",
  "name": "the name",
  "protected": false,
  "scopes": [
    "email",
    "profile"
  ],
  "subjects": [
    "email",
    "profile"
  ]
}
```

#### Relations

##### `GET /oidcproviders`

Retrieves the list of the account OIDC provider.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `POST /oidcproviders`

Creates a new OIDC provider.

##### `DELETE /oidcproviders/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /oidcproviders/:id`

Retrieves the object with the given ID.

##### `PUT /oidcproviders/:id`

Updates the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `clientID` `string` [`required`]

Unique client ID.

##### `clientSecret` `string` [`required`]

Client secret associated with the client ID.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `default` `boolean`

If set, this will be the default OIDCProvider. There can be only one default
provider in your account. When logging in with OIDC, if not provider name is
given, the default will be used.

##### `endpoint` `string` [`required`]

OIDC information endpoint.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `parentID` `string` [`autogenerated`,`read_only`]

ParentID contains the parent Vince account ID.

##### `parentName` `string` [`autogenerated`,`read_only`]

ParentName contains the name of the Vince parent Account.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `scopes` `[]string`

List of scopes to allow.

##### `subjects` `[]string`

Subjects is the list of claims that will provide the subject.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

## `core/billing`

| Resource                        | Description                                                                 |
| -                               | -                                                                           |
| [Invoice](#invoice)             | This api allows to view invoices for Aporeto customers.                     |
| [InvoiceRecord](#invoicerecord) | This api allows to view detailed records of invoices for Aporeto customers. |
| [Plan](#plan)                   | Plan contains the various billing plans available.                          |

### Invoice

This api allows to view invoices for Aporeto customers.

#### Example

```json
{
  "billedToProvider": "Aporeto"
}
```

#### Relations

##### `DELETE /invoices/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /invoices/:id`

Retrieves the object with the given ID.

##### `PUT /invoices/:id`

Updates the object with the given ID.

#### Attributes

##### `ID` `string`

ID is the id of the invoice.

##### `accountID` `string`

AccountID references the id of the customer that this invoice belongs to.

##### `billedToProvider` `emum(Aporeto | AWS)`

BilledToProvider holds the name of the provider that this invoice was billed to.

Default value:

```json
"Aporeto"
```

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `endDate` `time`

EndDate holds the end date for this invoice.

##### `startDate` `time`

StartDate holds the start date for this invoice.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

### InvoiceRecord

This api allows to view detailed records of invoices for Aporeto customers.

#### Relations

##### `DELETE /invoicerecords/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /invoicerecords/:id`

Retrieves the object with the given ID.

##### `PUT /invoicerecords/:id`

Updates the object with the given ID.

#### Attributes

##### `ID` `string`

ID is the id of this invoice record.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `invoiceID` `string`

InvoiceID references the id of the invoice that this invoice record provides
details for.

##### `invoiceRecords` `[]string`

InvoiceRecords provides details about billing units.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

### Plan

Plan contains the various billing plans available.

#### Relations

##### `GET /plans`

Retrieves the list of plans.

##### `GET /plans/:id`

Retrieves the object with the given ID.

#### Attributes

##### `description` `string` [`autogenerated`,`read_only`]

Description contains the description of the Plan.

##### `key` `string` [`autogenerated`,`read_only`]

Key contains the key identifier of the Plan.

##### `name` `string` [`autogenerated`,`read_only`]

Name contains the name of the Plan.

## `core/enforcer`

| Resource                                    | Description                                                                    |
| -                                           | -                                                                              |
| [CounterReport](#counterreport)             | Post a new counter tracing report.                                             |
| [Enforcer](#enforcer)                       | An Enforcer contains all parameters associated with a registered enforcer. The |
| [EnforcerReport](#enforcerreport)           | Post a new enforcer statistics report.                                         |
| [EnforcerTraceReport](#enforcertracereport) | Post a new enforcer trace that determines how packets are.                     |
| [PacketReport](#packetreport)               | Post a new packet tracing report.                                              |
| [TraceMode](#tracemode)                     | TraceMode is the tracing mode that must be applied to a PU.                    |
| [TraceRecord](#tracerecord)                 | Represents a single trace record from the enforcer.                            |

### CounterReport

Post a new counter tracing report.

#### Example

```json
{
  "counterAckInUnknownState": 0,
  "counterAckInvalidFormat": 0,
  "counterAckRejected": 0,
  "counterAckSigValidationFailed": 0,
  "counterAckTCPNoTCPAuthOption": 0,
  "counterConnectionsProcessed": 0,
  "counterContextIDNotFound": 0,
  "counterDroppedExternalService": 0,
  "counterInvalidConnState": 0,
  "counterInvalidNetState": 0,
  "counterInvalidProtocol": 0,
  "counterInvalidSynAck": 0,
  "counterMarkNotFound": 0,
  "counterNetSynNotSeen": 0,
  "counterNoConnFound": 0,
  "counterNonPUTraffic": 0,
  "counterOutOfOrderSynAck": 0,
  "counterPortNotFound": 0,
  "counterRejectPacket": 0,
  "counterServicePostprocessorFailed": 0,
  "counterServicePreprocessorFailed": 0,
  "counterSynAckBadClaims": 0,
  "counterSynAckClaimsMisMatch": 0,
  "counterSynAckDroppedExternalService": 0,
  "counterSynAckInvalidFormat": 0,
  "counterSynAckMissingClaims": 0,
  "counterSynAckMissingToken": 0,
  "counterSynAckNoTCPAuthOption": 0,
  "counterSynAckRejected": 0,
  "counterSynDroppedInvalidFormat": 0,
  "counterSynDroppedInvalidToken": 0,
  "counterSynDroppedNoClaims": 0,
  "counterSynDroppedTCPOption": 0,
  "counterSynRejectPacket": 0,
  "counterSynUnexpectedPacket": 0,
  "counterTCPAuthNotFound": 0,
  "counterUDPDropFin": 0,
  "counterUDPDropSynAck": 0,
  "counterUDPInvalidNetState": 0,
  "counterUnknownError": 0,
  "enforcerID": "xxxx-xxx-xxxx",
  "enforcerNamespace": "/my/namespace",
  "processingUnitID": "xxx-xxx-xxx",
  "processingUnitNamespace": "/my/namespace",
  "timestamp": "2018-06-14T23:10:46.420397985Z"
}
```

#### Relations

##### `POST /counterreports`

Create a counter report.

#### Attributes

##### `counterAckInUnknownState` `integer`

Counter for sending finack ack received in uknown connection state.

Default value:

```json
0
```

##### `counterAckInvalidFormat` `integer`

Counter for ack packet dropped because of invalid format.

Default value:

```json
0
```

##### `counterAckRejected` `integer`

Counter for reject ack packet as per policy.

Default value:

```json
0
```

##### `counterAckSigValidationFailed` `integer`

Counter for ack packet dropped because signature validation failed.

Default value:

```json
0
```

##### `counterAckTCPNoTCPAuthOption` `integer`

Counter for tcp authentication option not found.

Default value:

```json
0
```

##### `counterConnectionsProcessed` `integer`

Counter for ".

Default value:

```json
0
```

##### `counterContextIDNotFound` `integer`

Counter for unable to find contextid.

Default value:

```json
0
```

##### `counterDroppedExternalService` `integer`

Counter for no acls found for external services. dropping application syn
packet.

Default value:

```json
0
```

##### `counterInvalidConnState` `integer`

Counter for invalid connection state.

Default value:

```json
0
```

##### `counterInvalidNetState` `integer`

Counter for invalid net state.

Default value:

```json
0
```

##### `counterInvalidProtocol` `integer`

Counter for invalid protocol.

Default value:

```json
0
```

##### `counterInvalidSynAck` `integer`

Counter for pu is already dead - drop synack packet.

Default value:

```json
0
```

##### `counterMarkNotFound` `integer`

Counter for pu mark not found.

Default value:

```json
0
```

##### `counterNetSynNotSeen` `integer`

Counter for network syn packet was not seen.

Default value:

```json
0
```

##### `counterNoConnFound` `integer`

Counter for no context or connection found.

Default value:

```json
0
```

##### `counterNonPUTraffic` `integer`

Counter for traffic that belongs to a non PU process.

Default value:

```json
0
```

##### `counterOutOfOrderSynAck` `integer`

Counter for synack for flow with processed finack.

Default value:

```json
0
```

##### `counterPortNotFound` `integer`

Counter for port not found.

Default value:

```json
0
```

##### `counterRejectPacket` `integer`

Counter for reject the packet as per policy.

Default value:

```json
0
```

##### `counterServicePostprocessorFailed` `integer`

Counter for post service processing failed for network packet.

Default value:

```json
0
```

##### `counterServicePreprocessorFailed` `integer`

Counter for pre service processing failed for network packet.

Default value:

```json
0
```

##### `counterSynAckBadClaims` `integer`

Counter for synack packet dropped because of bad claims.

Default value:

```json
0
```

##### `counterSynAckClaimsMisMatch` `integer`

Counter for syn/ack packet dropped because of encryption mismatch.

Default value:

```json
0
```

##### `counterSynAckDroppedExternalService` `integer`

Counter for synack from external service dropped.

Default value:

```json
0
```

##### `counterSynAckInvalidFormat` `integer`

Counter for synack packet dropped because of invalid format.

Default value:

```json
0
```

##### `counterSynAckMissingClaims` `integer`

Counter for synack packet dropped because of no claims.

Default value:

```json
0
```

##### `counterSynAckMissingToken` `integer`

Counter for synack packet dropped because of missing token.

Default value:

```json
0
```

##### `counterSynAckNoTCPAuthOption` `integer`

Counter for tcp authentication option not found.

Default value:

```json
0
```

##### `counterSynAckRejected` `integer`

Counter for dropping because of reject rule on transmitter.

Default value:

```json
0
```

##### `counterSynDroppedInvalidFormat` `integer`

Counter for syn packet dropped because of invalid format.

Default value:

```json
0
```

##### `counterSynDroppedInvalidToken` `integer`

Counter for syn packet dropped because of invalid token.

Default value:

```json
0
```

##### `counterSynDroppedNoClaims` `integer`

Counter for syn packet dropped because of no claims.

Default value:

```json
0
```

##### `counterSynDroppedTCPOption` `integer`

Counter for tcp authentication option not found.

Default value:

```json
0
```

##### `counterSynRejectPacket` `integer`

Counter for syn dropped due to policy.

Default value:

```json
0
```

##### `counterSynUnexpectedPacket` `integer`

Counter for received syn packet from unknown pu.

Default value:

```json
0
```

##### `counterTCPAuthNotFound` `integer`

Counter for tcp authentication option not found.

Default value:

```json
0
```

##### `counterUDPDropFin` `integer`

Counter for dropped udp FIN handshake packets.

Default value:

```json
0
```

##### `counterUDPDropSynAck` `integer`

Counter for dropped udp synack handshake packets.

Default value:

```json
0
```

##### `counterUDPInvalidNetState` `integer`

Counter for udp packets received in invalid network state.

Default value:

```json
0
```

##### `counterUnknownError` `integer`

Counter for unknown error.

Default value:

```json
0
```

##### `enforcerID` `string`

Identifier of the enforcer sending the report.

Default value:

```json
"xxxx-xxx-xxxx"
```

##### `enforcerNamespace` `string`

Namespace of the enforcer sending the report.

Default value:

```json
"/my/namespace"
```

##### `processingUnitID` `string`

PUID is the ID of the PU reporting the counter.

##### `processingUnitNamespace` `string`

Namespace of the PU reporting the counter.

##### `timestamp` `time`

Timestamp is the date of the report.

### Enforcer

An Enforcer contains all parameters associated with a registered enforcer. The
object is mainly by maintained by the enforcers themselves. Users can read the
object in order to understand the current status of the enforcers.

#### Example

```json
{
  "FQDN": "server1.domain.com",
  "certificateRequest": "-----BEGIN CERTIFICATE REQUEST-----
MIICvDCCAaQCAQAwdzELMAkGA1UEBhMCVVMxDTALBgNVBAgMBFV0YWgxDzANBgNV
BAcMBkxpbmRvbjEWMBQGA1UECgwNRGlnaUNlcnQgSW5jLjERMA8GA1UECwwIRGln
aUNlcnQxHTAbBgNVBAMMFGV4YW1wbGUuZGlnaWNlcnQuY29tMIIBIjANBgkqhkiG
9w0BAQEFAAOCAQ8AMIIBCgKCAQEA8+To7d+2kPWeBv/orU3LVbJwDrSQbeKamCmo
wp5bqDxIwV20zqRb7APUOKYoVEFFOEQs6T6gImnIolhbiH6m4zgZ/CPvWBOkZc+c
1Po2EmvBz+AD5sBdT5kzGQA6NbWyZGldxRthNLOs1efOhdnWFuhI162qmcflgpiI
WDuwq4C9f+YkeJhNn9dF5+owm8cOQmDrV8NNdiTqin8q3qYAHHJRW28glJUCZkTZ
wIaSR6crBQ8TbYNE0dc+Caa3DOIkz1EOsHWzTx+n0zKfqcbgXi4DJx+C1bjptYPR
BPZL8DAeWuA8ebudVT44yEp82G96/Ggcf7F33xMxe0yc+Xa6owIDAQABoAAwDQYJ
KoZIhvcNAQEFBQADggEBAB0kcrFccSmFDmxox0Ne01UIqSsDqHgL+XmHTXJwre6D
hJSZwbvEtOK0G3+dr4Fs11WuUNt5qcLsx5a8uk4G6AKHMzuhLsJ7XZjgmQXGECpY
Q4mC3yT3ZoCGpIXbw+iP3lmEEXgaQL0Tx5LFl/okKbKYwIqNiyKWOMj7ZR/wxWg/
ZDGRs55xuoeLDJ/ZRFf9bI+IaCUd1YrfYcHIl3G87Av+r49YVwqRDT0VDV7uLgqn
29XI1PpVUNCPQGn9p/eX6Qo7vpDaPybRtA2R7XLKjQaF9oXWeCUqy1hvJac9QFO2
97Ob1alpHPoZ7mWiEuJwjBPii6a9M9G30nUo39lBi1w=
-----END CERTIFICATE REQUEST-----",
  "collectInfo": false,
  "enforcementStatus": "Inactive",
  "machineID": "3F23E8DF-C56D-45CF-89B8-A867F3956409",
  "name": "the name",
  "operationalStatus": "Registered",
  "protected": false,
  "updateAvailable": false
}
```

#### Relations

##### `GET /enforcers`

Retrieves the list of enforcers.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `POST /enforcers`

Creates a new enforcer.

##### `DELETE /enforcers/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /enforcers/:id`

Retrieves the object with the given ID.

##### `PUT /enforcers/:id`

Updates the object with the given ID.

##### `GET /auditprofilemappingpolicies/:id/enforcers`

Returns the list of enforcers that are affected by this poliy.

##### `GET /enforcerprofilemappingpolicies/:id/enforcers`

Returns the list of enforcers affected by an enforcer profile mapping policy.

##### `GET /hostservicemappingpolicies/:id/enforcers`

Returns the list of enforcers that are affected by this poliy.

##### `GET /enforcers/:id/auditprofiles`

Returns a list of the audit profiles that must be applied to this enforcer.

##### `GET /enforcers/:id/enforcerprofiles`

Returns the enforcer profile that must be used by an enforcer.

##### `GET /enforcers/:id/hostservices`

Returns a list of the host services policies that apply to this enforcer.

Parameters:

- `appliedServices` (`boolean`): Valid when retrieved for a given enforcer and returns the applied services.
- `setServices` (`boolean`): Instructs the backend to cache the services that were resolved. services.

##### `GET /enforcers/:id/poke`

Sends a poke empty object. This is used to ensure an enforcer is up and running.

Parameters:

- `cpuload` (`float`): Deprecated.
- `enforcementStatus` (`enum`): If set, changes the enforcement status of the enforcer alongside with the poke.
- `forceFullPoke` (`boolean`): If set, it will trigger a full poke (slower).
- `memory` (`integer`): Deprecated.
- `processes` (`integer`): Deprecated.
- `sessionClose` (`boolean`): If set, terminates a session for an enforcer.
- `sessionID` (`string`): If set, sends the current session ID of an enforcer.
- `status` (`enum`): If set, changes the status of the enforcer alongside with the poke.
- `ts` (`time`): time of report. If not set, local server time will be used.
- `version` (`string`): If set, version of the current running enforcer.

##### `GET /enforcers/:id/trustedcas`

Returns the list of CAs that should be trusted by this enforcer.

Parameters:

- `type` (`enum`): Type of certificate to get.

#### Attributes

##### `FQDN` `string` [`required`,`creation_only`]

FQDN contains the fqdn of the server where the enforcer is running.

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `certificate` `string` [`autogenerated`,`read_only`]

Certificate is the certificate of the enforcer.

##### `certificateRequest` `string`

If not empty during a create or update generation, the provided CSR will be
validated and signed by the backend providing a renewed certificate.

##### `collectInfo` `boolean`

CollectInfo indicates to the enforcer it needs to collect information.

##### `collectedInfo` `map[string]string`

CollectedInfo represents the latest info collected by the enforcer.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `currentVersion` `string`

CurrentVersion holds the enforcerd binary version that is currently associated
to this object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `enforcementStatus` `emum(Inactive | Active | Failed)`

Status of enforcement for PU managed directly by enforcerd, like Host PUs.

Default value:

```json
"Inactive"
```

##### `lastCollectionTime` `time`

LastCollectionTime represents the date and time when the info have been
collected.

##### `lastSyncTime` `time`

LastSyncTime holds the last heart beat time.

##### `localCA` `string` [`autogenerated`]

LocalCA contains the initial chain of trust for the enforcer. This valud is only
given when you retrieve a single enforcer.

##### `machineID` `string`

MachineID holds a unique identifier for every machine as detected by the
enforcer. It is based on hardware information such as the SMBIOS UUID, MAC
addresses of interfaces or cloud provider IDs.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `operationalStatus` `emum(Registered | Connected | Disconnected | Initialized)`

OperationalStatus tells the status of the enforcer.

Default value:

```json
"Registered"
```

##### `protected` `boolean`

Protected defines if the object is protected.

##### `publicToken` `string` [`autogenerated`,`read_only`]

PublicToken is the public token of the server that will be included in the
datapath and its signed by the private CA.

##### `startTime` `time`

startTime holds the time this enforcerd was started. This time-stamp is reported
by the enforcer and is is preserved across disconnects.

##### `subnets` `[]string`

Local subnets of this enforcer.

##### `unreachable` `boolean` [`autogenerated`,`read_only`]

Control plane will set this value to true if it hasn't heard from the enforcer
for more than 5m.

##### `updateAvailable` `boolean`

Tells if the the version of enforcerd is outdated and should be updated.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### EnforcerReport

Post a new enforcer statistics report.

#### Example

```json
{
  "CPULoad": 10,
  "ID": "xxx-xxx-xxx-xxx",
  "memory": 10000,
  "name": "aporeto-enforcerd-xxx",
  "namespace": "/my/ns",
  "processes": 10,
  "timestamp": "2018-06-14T23:10:46.420397985Z"
}
```

#### Relations

##### `POST /enforcerreports`

Create a enforcer statistics report.

#### Attributes

##### `CPULoad` `float`

Total CPU utilization of the enforcer as a percentage of vCPUs.

##### `ID` `string` [`required`]

ID of the enforcer to report.

##### `memory` `integer`

Total resident memory used by the enforcer in bytes.

##### `name` `string` [`required`]

Name of the enforcer to report.

##### `namespace` `string` [`required`]

Namespace of the enforcer to report.

##### `processes` `integer`

Number of active processes of the enforcer.

##### `timestamp` `time` [`required`]

Date of the report.

### EnforcerTraceReport

Post a new enforcer trace that determines how packets are.

#### Example

```json
{
  "enforcerID": "5c6cce207ddf1fc159a104bf",
  "enforcerNamespace": "/acme/prod",
  "namespace": "/acme/prod/database",
  "puID": "5c6ccd947ddf1fc159a104b7"
}
```

#### Relations

##### `POST /enforcertracereports`

Create an enforcer trace report.

#### Attributes

##### `enforcerID` `string` [`required`]

EnforcerID of the enforcer where the trace was collected.

##### `enforcerNamespace` `string` [`required`]

Namespace of the enforcer where the trace was collected.

##### `namespace` `string` [`required`]

Namespace of the PU where the trace was collected.

##### `puID` `string` [`required`]

ID of the pu where the trace was collected.

### PacketReport

Post a new packet tracing report.

#### Example

```json
{
  "destinationPort": 11000,
  "encrypt": false,
  "enforcerID": "xxxx-xxx-xxxx",
  "enforcerNamespace": "/my/namespace",
  "event": "Rcv",
  "namespace": "/my/namespace",
  "protocol": 6,
  "puID": "xxx-xxx-xxx",
  "rawPacket": "abcd",
  "sourcePort": 80,
  "timestamp": "2018-06-14T23:10:46.420397985Z",
  "triremePacket": true
}
```

#### Relations

##### `POST /packetreports`

Create a packet trace report.

#### Attributes

##### `destinationIP` `string`

DestinationIP is the IP address of the destination.

##### `destinationPort` `integer` [`max_value=65536.000000`]

DestinationPort is the destination port of a TCP or UDP packet.

##### `dropReason` `string`

This field is only set if 'event' is set to 'Dropped' and specifies the reason
for the drop.

##### `encrypt` `boolean`

Encrypt indicates that the packet was encrypted.

##### `enforcerID` `string`

Identifier of the enforcer sending the report.

Default value:

```json
"xxxx-xxx-xxxx"
```

##### `enforcerNamespace` `string`

Namespace of the enforcer sending the report.

Default value:

```json
"/my/namespace"
```

##### `event` `emum(Received | Transmitted | Dropped)` [`required`]

Event is the event that triggered the report.

##### `namespace` `string` [`required`]

Namespace of the PU reporting the packet.

##### `protocol` `integer` [`required`,`max_value=255.000000`]

Protocol number.

##### `puID` `string` [`required`]

PUID is the ID of the PU reporting the packet.

##### `rawPacket` `string`

The first 64 bytes of the packet.

Default value:

```json
"abcd"
```

##### `sourceIP` `string`

SourceIP is the source IP address of the packet.

##### `sourcePort` `integer` [`max_value=65536.000000`]

SourcePort is the source port of the packet.

##### `timestamp` `time` [`required`]

Timestamp is the date of the report.

##### `triremePacket` `boolean` [`required`]

TriremePacket is set if the packet arrived with the Trireme options.

Default value:

```json
true
```

### TraceMode

TraceMode is the tracing mode that must be applied to a PU.

#### Example

```json
{
  "IPTables": false,
  "applicationConnections": false,
  "interval": "10s",
  "networkConnections": false
}
```

#### Attributes

##### `IPTables` `boolean`

IPTables instructs the enforcers to provide an iptables trace for a PU.

##### `applicationConnections` `boolean`

Instructs the enforcer to send records for all
application initiated connections.

##### `interval` `string`

Determines the length of the time interval that the trace must be
enabled.

Default value:

```json
"10s"
```

##### `networkConnections` `boolean`

Instructs the enforcer to send records for all network
initiated connections.

### TraceRecord

Represents a single trace record from the enforcer.

#### Example

```json
{
  "TTL": 64,
  "chain": "PREROUTING",
  "destinationIP": "10.1.1.30",
  "destinationInterface": "en0",
  "destinationPort": 80,
  "length": 98,
  "packetID": 10,
  "protocol": 80,
  "ruleID": 10,
  "sourceIP": "10.1.1.30",
  "sourceInterface": "en0",
  "sourcePort": 80,
  "tableName": "raw",
  "timestamp": "2018-06-14T23:10:46.420397985Z"
}
```

#### Attributes

##### `TTL` `integer` [`required`,`max_value=255.000000`]

TTL is the TTL value of the packet.

##### `chain` `string` [`required`]

Chain is the chain that the trace was collected from.

##### `destinationIP` `string` [`required`]

DestinationIP is the destination IP.

##### `destinationInterface` `string`

DestinationInterface is the destination interface of the packet.

##### `destinationPort` `integer` [`required`,`min_value=1.000000`,`max_value=65536.000000`]

DestinationPort is the destination UPD or TCP port of the packet.

##### `length` `integer` [`required`,`max_value=65536.000000`]

Length of the observed packet.

##### `packetID` `integer` [`required`]

PacketID is the IP packet header ID.

##### `protocol` `integer` [`required`,`max_value=65536.000000`]

Protocol is the protocol of the packets.

##### `ruleID` `integer` [`required`]

ruleID is the priority index of the iptables entry that was hit.

##### `sourceIP` `string` [`required`]

SourceIP is the source IP of the packet.

##### `sourceInterface` `string`

SourceInterface is the source interface of the packet.

##### `sourcePort` `integer` [`required`,`min_value=1.000000`,`max_value=65536.000000`]

SourcePort is the source TCP or UDP Port of the packet.

##### `tableName` `string` [`required`]

TableName is the iptable name that the trace was collected.

##### `timestamp` `time` [`required`]

Timestamp is the date of the report.

## `core/monitoring`

| Resource                  | Description                                                                     |
| -                         | -                                                                               |
| [Activity](#activity)     | Contains all the activity log that happened in a namespace. All successful or   |
| [Alarm](#alarm)           | An alarm represents an event requiring attention.                               |
| [EventLog](#eventlog)     | This api allows to report various event on any objects.                         |
| [Message](#message)       | The Message API allows to post public messages that will be visible through all |
| [Tabulation](#tabulation) | Tabulate API allows you to retrieve a custom table view for any identity using  |

### Activity

Contains all the activity log that happened in a namespace. All successful or
failed actions will be available, and eventual errors as well as the claims of
the user who triggered the actiions. This log is capped and only keeps the last
50k entries by default.

#### Relations

##### `GET /activities`

Retrieves the list of activity logs.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /activities/:id`

Retrieves the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `claims` `object` [`autogenerated`,`read_only`]

Claims of the user who performed the operation.

##### `data` `object` [`autogenerated`,`read_only`]

Data of the notification.

##### `date` `time` [`autogenerated`,`read_only`]

Date of the notification.

##### `error` `object` [`autogenerated`,`read_only`]

Error contains the eventual error.

##### `message` `string`

Message of the notification.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `operation` `string` [`autogenerated`,`read_only`]

Operation describe what kind of operation the notification represents.

##### `originalData` `object` [`autogenerated`,`read_only`]

OriginalData contains the eventual original data of the object that has been
modified.

##### `source` `string` [`autogenerated`,`read_only`]

Source contains meta information about the source.

##### `targetIdentity` `string` [`autogenerated`,`read_only`]

TargetIdentity is the Identity of the related object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### Alarm

An alarm represents an event requiring attention.

#### Example

```json
{
  "content": "This is an alarm",
  "emails": [
    "amir@aporeto.com",
    "john@aporeto.com"
  ],
  "kind": "aporeto.alarm.kind",
  "name": "the name",
  "protected": false,
  "status": "Open"
}
```

#### Relations

##### `GET /alarms`

Retrieves all the alarms.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `POST /alarms`

Creates a new alarm.

##### `DELETE /alarms/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /alarms/:id`

Retrieves the object with the given ID.

##### `PUT /alarms/:id`

Updates the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `content` `string` [`required`,`creation_only`]

Content of the alarm.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `data` `[]map[string]string`

Data represent user data related to the alams.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `emails` `[]string`

Emails is a list of recipients that should be emailed when this alarm is
created.

##### `kind` `string` [`required`,`creation_only`]

Kind identifies the kind of alarms. If two alarms are created with the same
identifier, then only the occurrence will be incremented.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `occurrences` `[]time.Time` [`autogenerated`,`creation_only`]

Number of time this alarm have been seen.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `status` `emum(Acknowledged | Open | Resolved)`

Status of the alarm.

Default value:

```json
"Open"
```

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### EventLog

This api allows to report various event on any objects.

#### Example

```json
{
  "category": "enforcerd:policy",
  "content": "Unable to activate docker container xyz because abc.",
  "level": "Info",
  "targetID": "xxx-xxx-xxx-xxx",
  "targetIdentity": "processingunit",
  "title": "Error while activating processing unit."
}
```

#### Relations

##### `POST /eventlogs`

Creates a new eventlog for a particular entity.

#### Attributes

##### `category` `string` [`required`,`creation_only`]

Category of the log.

##### `content` `string` [`required`,`creation_only`]

Content of the log.

##### `date` `time` [`autogenerated`,`creation_only`]

Creation date of the eventlog.

##### `level` `emum(Debug | Info | Warning | Error | Critical)` [`creation_only`]

Represent the level of the log .

Default value:

```json
"Info"
```

##### `namespace` `string` [`autogenerated`,`read_only`,`creation_only`]

Namespace tag attached to an entity.

##### `opaque` `string` [`creation_only`]

Opaque data that can attached to the log, for further machine processing.

##### `targetID` `string` [`required`,`creation_only`]

ID of the object this eventlog is attached to. The object must be in the same
namespace than the eventlog.

##### `targetIdentity` `string` [`required`,`creation_only`]

Identity of the object this eventlog is attached to.

##### `title` `string` [`required`,`creation_only`]

Title of the eventlog.

### Message

The Message API allows to post public messages that will be visible through all
children namespaces.

#### Example

```json
{
  "level": "Info",
  "name": "the name",
  "propagate": false,
  "protected": false
}
```

#### Relations

##### `GET /messages`

Retrieves the list of messages.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /messages`

Creates a new message.

##### `DELETE /messages/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /messages/:id`

Retrieves the object with the given ID.

Parameters:

- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `PUT /messages/:id`

Updates the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `expirationTime` `time`

expirationTime is the time after which the message will be deleted.

##### `level` `emum(Danger | Info | Warning)`

Level defines how the message is important.

Default value:

```json
"Info"
```

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `validity` `string` [`format=^[0-9]+[smh]$`]

Validity set using golang time duration, when the message will be automatically
deleted.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### Tabulation

Tabulate API allows you to retrieve a custom table view for any identity using
any tags you like as columns.

#### Relations

##### `GET /tabulations`

Retrieves tabulated informations based on parameters.

Parameters:

- `column` (`string`): Columns you want to see.
- `identity` (`string`): Identity you want to tabulate.
- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

Mandatory Parameters

`identity`

#### Attributes

##### `headers` `[]string` [`autogenerated`,`read_only`]

Headers contains the requests headers that matched.

##### `rows` `[][]interface{}` [`autogenerated`,`read_only`]

Rows contains the tabulated data.

##### `targetIdentity` `string` [`autogenerated`,`read_only`]

TargetIdentity contains the requested target identity.

## `core/namespace`

| Resource                                          | Description                                                                    |
| -                                                 | -                                                                              |
| [Namespace](#namespace)                           | A Namespace represents the core organizational unit of the system. All objects |
| [NamespaceMappingPolicy](#namespacemappingpolicy) | A Namespace Mapping Policy defines in which namespace a Processing Unit should |

### Namespace

A Namespace represents the core organizational unit of the system. All objects
always exists in a single namespace. A Namespace can also have child namespaces.
They can be used to split the system into organizations, business units,
applications, services or any combination you like.

#### Example

```json
{
  "SSHCAEnabled": false,
  "customZoning": false,
  "localCAEnabled": false,
  "name": "mynamespace",
  "protected": false,
  "serviceCertificateValidity": "1h"
}
```

#### Relations

##### `GET /namespaces`

Retrieves the list of namespaces.

Parameters:

- `authorized` (`boolean`): Returns all namespaces the token bearer has the right to read. If set, other parameters like `recursive` or `q` will have no effect.
- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `POST /namespaces`

Creates a new namespace.

##### `DELETE /namespaces/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /namespaces/:id`

Retrieves the object with the given ID.

##### `PUT /namespaces/:id`

Updates the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `SSHCA` `string` [`autogenerated`,`read_only`]

SSHCA holds the eventual SSH authority used by this namespace.

##### `SSHCAEnabled` `boolean`

If enabled, the a SSH CA will be generated for the namespace. This CA can be
deployed in SSH server to validate SSH certificates issued by the platform.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedSSHCAID` `string` [`read_only`]

associatedSSHCAID holds the remote ID of the SSH authority to use.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `customZoning` `boolean` [`creation_only`]

Defines if the namespace should inherit its parent zone. If this property is set
to false, the `zoning` property will be ignored and the namespace will have the
same zone as its parent.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `localCA` `string` [`autogenerated`,`read_only`]

LocalCA holds the eventual certificate authority used by this namespace.

##### `localCAEnabled` `boolean`

LocalCAEnabled defines if the namespace should use a local Certificate
Authority. Switching it off and on again will regenerate a new CA.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`creation_only`,`format=^[a-zA-Z0-9-_/]+$`]

Name is the name of the namespace.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `networkAccessPolicyTags` `[]string`

_This attribute is deprecated_.

List of tags that will be added to every `or` clause of all network access
policies in the namespace and its children.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `serviceCertificateValidity` `string`

Determines the validity time of certificates issued in this namespace. Default
value is 1 hour.

Default value:

```json
"1h"
```

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

##### `zoning` `integer` [`creation_only`]

Defines what zone the namespace should live in.

### NamespaceMappingPolicy

A Namespace Mapping Policy defines in which namespace a Processing Unit should
be placed when it is created, based on its tags.  When an Aporeto Agent creates
a new Processing Unit, the system will place it in its own namespace if no
matching Namespace Mapping Policy can be found. If one match is found, then the
Processing will be bumped down to the namespace declared in the policy. If it
finds in that child namespace another matching Namespace Mapping Policy, then
the Processing Unit will be bumped down again, until it reach a namespace with
no matching policies.  This is very useful to dispatch processes and containers
into a particular namespace, based on a lot of factor.   You can put in place a
quarantine namespace that will grab all Processing Units with too much
vulnerabilities for instances.

#### Example

```json
{
  "disabled": false,
  "mappedNamespace": "/blue/namespace",
  "name": "the name",
  "protected": false,
  "subject": [
    [
      "color=blue"
    ]
  ]
}
```

#### Relations

##### `GET /namespacemappingpolicies`

Retrieves the list namespace mapping policies.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `POST /namespacemappingpolicies`

Creates a new namespace mapping policy.

##### `DELETE /namespacemappingpolicies/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /namespacemappingpolicies/:id`

Retrieves the object with the given ID.

##### `PUT /namespacemappingpolicies/:id`

Updates the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `mappedNamespace` `string` [`required`,`format=^[a-zA-Z0-9-_/]+$`]

mappedNamespace is the mapped namespace.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `subject` `[][]string`

Subject is the subject.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

## `core/policy`

| Resource                                        | Description                                                                         |
| -                                               | -                                                                                   |
| [Policy](#policy)                               | Policy represents the policy primitive used by all aporeto policies.                |
| [PolicyRefresh](#policyrefresh)                 | PolicyRefresh is sent to client when as a push event when a policy refresh is       |
| [PolicyRule](#policyrule)                       | PolicyRule is an internal policy resolution API. Services can use this API to       |
| [ProcessingUnitRefresh](#processingunitrefresh) | ProcessingUnitRefresh is sent to client when a poke has been triggered using the... |
| [RenderedPolicy](#renderedpolicy)               | Retrieve the aggregated policies applied to a particular processing unit.           |

### Policy

Policy represents the policy primitive used by all aporeto policies.

#### Example

```json
{
  "disabled": false,
  "fallback": false,
  "name": "the name",
  "propagate": false,
  "propagationHidden": false,
  "protected": false,
  "type": "APIAuthorization"
}
```

#### Relations

##### `GET /policies`

Retrieves the list of policy primitives.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `DELETE /policies/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /policies/:id`

Retrieves the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `action` `map[string]map[string]interface{}`

Action defines set of actions that must be enforced when a dependency is met.

##### `activeDuration` `string` [`format=^[0-9]+[smh]$`]

ActiveDuration defines for how long the policy will be active according to the
activeSchedule.

##### `activeSchedule` `string`

ActiveSchedule defines when the policy should be active using the cron notation.
The policy will be active for the given activeDuration.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `expirationTime` `time`

If set the policy will be auto deleted at the given time.

##### `fallback` `boolean`

Fallback indicates that this is fallback policy. It will only be
applied if no other policies have been resolved. If the policy is also
propagated it will become a fallback for children namespaces.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `object` `[][]string`

Object represents set of entities that another entity depends on. As subjects,
objects are identified as logical operations on tags when a policy is defined.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `propagationHidden` `boolean`

If set to true while the policy is propagating, it won't be visible to children
namespace, but still used for policy resolution.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `relation` `[]string`

Relation describes the required operation to be performed between subjects and
objects.

##### `subject` `[][]string`

Subject represent sets of entities that will have a dependency other entities.
Subjects are defined as logical operations on tags. Logical operations can
includes AND/OR.

##### `type` `emum(APIAuthorization | AuditProfileMapping | EnforcerProfile | File | Hook | HostServiceMapping | Infrastructure | NamespaceMapping | Network | ProcessingUnit | Quota | Service | ServiceDependency | Syscall | TokenScope | SSHAuthorization | UserAccess)` [`creation_only`]

Type of the policy.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### PolicyRefresh

PolicyRefresh is sent to client when as a push event when a policy refresh is
needed on their side.

#### Attributes

##### `sourceID` `string`

SourceNamespace contains the original ID of the updated object.

##### `sourceNamespace` `string`

SourceNamespace contains the original namespace of the updated object.

##### `type` `string`

Type contains the policy type that is affected.

### PolicyRule

PolicyRule is an internal policy resolution API. Services can use this API to
retrieve a policy resolution.

#### Example

```json
{
  "name": "the name",
  "propagated": false
}
```

#### Relations

##### `GET /policyrules/:id`

Retrieves the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `action` `map[string]map[string]interface{}`

Action defines set of actions that must be enforced when a dependency is met.

##### `auditProfiles` [`[]auditprofile`](#auditprofile)

AuditProfiles provides the audit profiles that must be applied.

##### `enforcerProfiles` [`[]enforcerprofile`](#enforcerprofile)

EnforcerProfiles provides the information about the server profile.

##### `externalNetworks` [`[]externalnetwork`](#externalnetwork)

Policy target networks.

##### `filePaths` [`[]filepath`](#filepath)

Policy target file paths.

##### `hostServices` [`[]hostservice`](#hostservice)

HostServices provides the list of host services that must be instantiated.

##### `isolationProfiles` [`[]isolationprofile`](#isolationprofile)

IsolationProfiles are the isolation profiles of the rule.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespaces` [`[]namespace`](#namespace)

Policy target namespaces.

##### `policyNamespace` `string`

PolicyNamespace is the namespace of the policy that created this rule.

##### `policyUpdateTime` `time`

Last time the policy was updated.

##### `propagated` `boolean`

Propagated indicates if the policy is propagated.

##### `relation` `[]string`

Relation describes the required operation to be performed between subjects and
objects.

##### `services` [`[]service`](#service)

Services provides the services of this policy rule.

##### `tagClauses` `[][]string`

Policy target tags.

### ProcessingUnitRefresh

ProcessingUnitRefresh is sent to client when a poke has been triggered using the
parameter `?notify=true`. This is used by instances of enforcerd to be notify an
external change on the processing unit must be processed.

#### Attributes

##### `ID` `string`

ID contains the original ID of the Processing Unit.

##### `namespace` `string`

Namespace contains the original namespace of the Processing Unit.

### RenderedPolicy

Retrieve the aggregated policies applied to a particular processing unit.

#### Example

```json
{
  "processingUnit": "{
  \"name\": \"pu\",
  \"type\": \"Docker\",
  \"normalizedTags\": [
    \"a=a\",
    \"b=b\"
  ]
}"
}
```

#### Relations

##### `POST /renderedpolicies`

Render a policy for a processing unit.

Parameters:

- `csr` (`string`): CSR to sign.

##### `GET /processingunits/:id/renderedpolicies`

Retrieves the policies for the processing unit.

Parameters:

- `csr` (`string`): CSR to sign.

#### Attributes

##### `certificate` `string` [`read_only`]

Certificate is the certificate associated with this PU. It will identify the PU
to any internal or external services.

##### `dependendServices` [`[]service`](#service)

DependendServices is the list of services that this processing unit depends on.

##### `egressPolicies` `_rendered_policy` [`autogenerated`,`read_only`]

EgressPolicies lists all the egress policies attached to processing unit.

##### `exposedServices` [`[]service`](#service)

ExposedServices is the list of services that this processing unit is
implementing.

##### `hashedTags` `map[string]string` [`autogenerated`,`read_only`]

hashedTags contains the list of tags that matched the policies and their hashes.

##### `ingressPolicies` `_rendered_policy` [`autogenerated`,`read_only`]

IngressPolicies lists all the ingress policies attached to processing unit.

##### `matchingTags` `[]string` [`autogenerated`,`read_only`]

MatchingTags contains the list of tags that matched the policies.

##### `processingUnit` [`processingunit`](#processingunit) [`required`,`creation_only`]

Can be set during a POST operation to render a policy on a Processing Unit that
has not been created yet.

##### `processingUnitID` `string` [`autogenerated`,`read_only`]

Identifier of the processing unit.

##### `scopes` `[]string`

Scopes is the set of scopes granted to this processing unit that it has to
present in HTTP requests.

## `core/processingunit`

| Resource                                    | Description                                                                     |
| -                                           | -                                                                               |
| [DataPathCertificate](#datapathcertificate) | This API is used by instance of enforcers to retrieve various certificates used |
| [ProcessingUnit](#processingunit)           | A Processing Unit reprents anything that can compute. It can be a Docker        |
| [Vulnerability](#vulnerability)             | A vulnerabily represents a particular CVE.                                      |

### DataPathCertificate

This API is used by instance of enforcers to retrieve various certificates used
for the datapath.

#### Example

```json
{
  "CSR": "-----BEGIN CERTIFICATE REQUEST-----
MIICvDCCAaQCAQAwdzELMAkGA1UEBhMCVVMxDTALBgNVBAgMBFV0YWgxDzANBgNV
BAcMBkxpbmRvbjEWMBQGA1UECgwNRGlnaUNlcnQgSW5jLjERMA8GA1UECwwIRGln
aUNlcnQxHTAbBgNVBAMMFGV4YW1wbGUuZGlnaWNlcnQuY29tMIIBIjANBgkqhkiG
9w0BAQEFAAOCAQ8AMIIBCgKCAQEA8+To7d+2kPWeBv/orU3LVbJwDrSQbeKamCmo
wp5bqDxIwV20zqRb7APUOKYoVEFFOEQs6T6gImnIolhbiH6m4zgZ/CPvWBOkZc+c
1Po2EmvBz+AD5sBdT5kzGQA6NbWyZGldxRthNLOs1efOhdnWFuhI162qmcflgpiI
WDuwq4C9f+YkeJhNn9dF5+owm8cOQmDrV8NNdiTqin8q3qYAHHJRW28glJUCZkTZ
wIaSR6crBQ8TbYNE0dc+Caa3DOIkz1EOsHWzTx+n0zKfqcbgXi4DJx+C1bjptYPR
BPZL8DAeWuA8ebudVT44yEp82G96/Ggcf7F33xMxe0yc+Xa6owIDAQABoAAwDQYJ
KoZIhvcNAQEFBQADggEBAB0kcrFccSmFDmxox0Ne01UIqSsDqHgL+XmHTXJwre6D
hJSZwbvEtOK0G3+dr4Fs11WuUNt5qcLsx5a8uk4G6AKHMzuhLsJ7XZjgmQXGECpY
Q4mC3yT3ZoCGpIXbw+iP3lmEEXgaQL0Tx5LFl/okKbKYwIqNiyKWOMj7ZR/wxWg/
ZDGRs55xuoeLDJ/ZRFf9bI+IaCUd1YrfYcHIl3G87Av+r49YVwqRDT0VDV7uLgqn
29XI1PpVUNCPQGn9p/eX6Qo7vpDaPybRtA2R7XLKjQaF9oXWeCUqy1hvJac9QFO2
97Ob1alpHPoZ7mWiEuJwjBPii6a9M9G30nUo39lBi1w=
-----END CERTIFICATE REQUEST-----",
  "objectID": "5c83035648675400019ab901",
  "sessionID": "5c83035648675400019ab901",
  "type": "Service"
}
```

#### Relations

##### `POST /datapathcertificates`

Creates a new Certificate for datapath.

#### Attributes

##### `CSR` `string` [`required`]

Contains the CSR the enforcer wants control plane to sign. Depending on the
Certificate there will be various requirement for the CSR to be accepted.

##### `certificate` `string` [`autogenerated`,`read_only`]

The certificate.

##### `objectID` `string` [`required`]

ID of the object you want to issue a certificate for.

##### `sessionID` `string`

Provides the session ID of the enforcer when retrieving a datapath certificate.

##### `signer` `string` [`autogenerated`,`read_only`]

Contains a the CA that signed the delivered certificates.

##### `token` `string` [`autogenerated`,`read_only`]

Contains a crypto token.

##### `type` `emum(Enforcer | Service)`

Type of certificate.

### ProcessingUnit

A Processing Unit reprents anything that can compute. It can be a Docker
container, or a simple Unix process. They are created, updated and deleted by
the system as they come and go. You can only modify its tags.  Processing Units
use Network Access Policies to define which other Processing Units or External
Services they can communicate with and File Access Policies to define what File
Paths they can use.

#### Example

```json
{
  "collectInfo": false,
  "enforcementStatus": "Inactive",
  "name": "the name",
  "operationalStatus": "Initialized",
  "protected": false,
  "type": "Docker"
}
```

#### Relations

##### `GET /processingunits`

Retrieves the list of processing units.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `archived` (`boolean`): Also retrieve the objects that have been archived.

##### `POST /processingunits`

Creates a new processing unit.

##### `DELETE /processingunits/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /processingunits/:id`

Retrieves the object with the given ID.

Parameters:

- `archived` (`boolean`): Also retrieve the objects that have been archived.

##### `PUT /processingunits/:id`

Updates the object with the given ID.

##### `GET /fileaccesspolicies/:id/processingunits`

Returns the list of ProcessingUnits that match the policy.

##### `GET /infrastructurepolicies/:id/processingunits`

Returns the list of Processing Units affected by an infrastructure policy.

Parameters:

- `mode` (`enum`): Matching mode.

##### `GET /networkaccesspolicies/:id/processingunits`

Returns the list of Processing Units affected by a network access policy.

Parameters:

- `mode` (`enum`): Matching mode.

##### `GET /processingunitpolicies/:id/processingunits`

Returns the list of ProcessingUnits by a given processing unit policies.

##### `GET /servicedependencies/:id/processingunits`

Returns the list of Processing Units that depend on an service.

##### `GET /services/:id/processingunits`

Retrieves the Processing Units that implement this service.

Parameters:

- `mode` (`enum`): Matching mode.

##### `GET /vulnerabilities/:id/processingunits`

Retrieves the processing units affected by the a vulnerabily.

##### `GET /processingunits/:id/poke`

Sends a poke empty object. This will send a snaphot of the pu to time series
database.

Parameters:

- `enforcementStatus` (`enum`): If set, changes the enforcement status of the processing unit alongside with the poke.
- `forceFullPoke` (`boolean`): If set, it will trigger a full poke (slower).
- `notify` (`boolean`): Can be sent to trigger a ProcessingUnitRefresh event that will be handled by the enforcer. If this is set, all other additional parameters will be ignored.
- `status` (`enum`): If set, changes the status of the processing unit alongside with the poke.
- `ts` (`time`): time of report. If not set, local server time will be used.

##### `GET /processingunits/:id/renderedpolicies`

Retrieves the policies for the processing unit.

Parameters:

- `csr` (`string`): CSR to sign.

##### `GET /processingunits/:id/services`

Retrieves the services used by a processing unit.

##### `GET /processingunits/:id/vulnerabilities`

Retrieves the vulnerabilities affecting the processing unit.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `collectInfo` `boolean`

CollectInfo indicates to the enforcer it needs to collect information for this
PU.

##### `collectedInfo` `map[string]string`

CollectedInfo represents the latest info collected by the enforcer for this PU.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `enforcementStatus` `emum(Active | Failed | Inactive)`

EnforcementStatus communicates the state of the enforcer for that PU.

Default value:

```json
"Inactive"
```

##### `enforcerID` `string`

EnforcerID is the ID of the enforcer associated with the processing unit.

##### `enforcerNamespace` `string`

enforcerNamespace is the namespace of the enforcer associated with the
processing unit.

##### `image` `string`

_This attribute is deprecated_.

This field is deprecated and it is there for backward compatibility. Use
`images` instead.

##### `images` `[]string` [`creation_only`]

List of images or executable paths used by the Processing Unit.

##### `lastCollectionTime` `time`

LastCollectionTime represents the date and time when the info have been
collected.

##### `lastSyncTime` `time` [`autogenerated`]

LastSyncTime is the time when the policy was last resolved.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `nativeContextID` `string`

NativeContextID is the Docker UUID or service PID.

##### `networkServices` [`[]processingunitservice`](#processingunitservice)

NetworkServices is the list of services that this processing unit has declared
that it will be listening to. This can happen either with an activation command
or by exposing the ports in a container manifest.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `operationalStatus` `emum(Initialized | Paused | Running | Stopped | Terminated)`

OperationalStatus of the processing unit.

Default value:

```json
"Initialized"
```

##### `protected` `boolean`

Protected defines if the object is protected.

##### `tracing` [`tracemode`](#tracemode)

Tracing indicates if this PU must be placed in tracing mode.

##### `type` `emum(APIGateway | Docker | Host | HostService | LinuxService | RKT | User | SSHSession)` [`creation_only`]

Type of the container ecosystem.

##### `unreachable` `boolean` [`autogenerated`,`read_only`]

Control plane will set this value to true if it hasn't heard from the pu for
more than 5m.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### Vulnerability

A vulnerabily represents a particular CVE.

#### Example

```json
{
  "CVSS2Score": 3.2,
  "link": "https://cve.com/CVE-1234",
  "name": "the name",
  "protected": false,
  "severity": 3
}
```

#### Relations

##### `GET /vulnerabilities`

Retrieves the list of vulnerabilities.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `POST /vulnerabilities`

Creates a new vulnerability.

##### `GET /vulnerabilities/:id`

Retrieves the object with the given ID.

##### `GET /processingunits/:id/vulnerabilities`

Retrieves the vulnerabilities affecting the processing unit.

##### `GET /vulnerabilities/:id/processingunits`

Retrieves the processing units affected by the a vulnerabily.

#### Attributes

##### `CVSS2Score` `float` [`creation_only`]

CVSS v2 score.

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `link` `string` [`autogenerated`,`required`,`creation_only`]

Link is the URL that refers to the vulnerability.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `severity` `_vulnerability_level` [`required`,`creation_only`]

Severity refers to the security vulnerability level.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

## `core/tag`

| Resource              | Description                                                                     |
| -                     | -                                                                               |
| [Tag](#tag)           | A tag is a string in the form of "key=value" that can applied to all objects in |
| [TagValue](#tagvalue) | Represents all values associated to tag key.                                    |

### Tag

A tag is a string in the form of "key=value" that can applied to all objects in
the system. They are used for policy resolution. Tags starting by a "$" are
derived from the property of an object (for instance an object with ID set to
xxx and a name set to "the name" will be tagged by default with "$name=the name"
and "$id=xxx"). Tags starting with an "@" have been generated by an external
system.

#### Example

```json
{
  "value": "key=value"
}
```

#### Relations

##### `GET /tags`

Retrieves the list of existing tags in the system.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `count` `integer` [`autogenerated`,`read_only`]

Count represents the number of time the tag is used.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `value` `string` [`required`,`creation_only`]

Value represents the value of the tag.

### TagValue

Represents all values associated to tag key.

#### Relations

##### `GET /tagvalues`

Retrieves the list of existing values for the given tag keys.

Parameters:

- `key` (`string`): Keys of the tag you want to get the values of.

Mandatory Parameters

`key`

#### Attributes

##### `key` `string` [`autogenerated`,`read_only`]

The requested key.

##### `values` `[]string` [`autogenerated`,`read_only`]

List of all values.

## `core/workflow`

| Resource                                        | Description                                            |
| -                                               | -                                                      |
| [Recipe](#recipe)                               | A Recipe defines a list of steps to define a workflow. |
| [UIParameter](#uiparameter)                     | Represents a parameter that will be shown in the UI.   |
| [UIParameterVisibility](#uiparametervisibility) | Represent a visibility condition for a uiparameter.    |
| [UIStep](#uistep)                               | Represents a parameter that will be shown in the UI.   |
| [ValidateUIParameter](#validateuiparameter)     | This api validates a list of UIParameters.             |

### Recipe

A Recipe defines a list of steps to define a workflow.

#### Example

```json
{
  "label": "magicpanda",
  "name": "the name",
  "propagate": false,
  "protected": false,
  "targetIdentities": [
    "processingunit",
    "enforcer"
  ]
}
```

#### Relations

##### `GET /recipes`

Retrieves the list of recipes.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /recipes`

Creates a new recipe.

##### `DELETE /recipes/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /recipes/:id`

Retrieves the object with the given ID.

Parameters:

- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `PUT /recipes/:id`

Updates the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `icon` `string`

Icon contains a base64 image for the recipe.

##### `key` `string` [`read_only`]

Key is the unique key of the recipe.

##### `label` `string` [`required`,`creation_only`]

Label defines the recipe.

Default value:

```json
"magicpanda"
```

##### `longDescription` `string`

LongDescription provides a long description of the recipe.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `options` [`recipeoptions`](#recipeoptions)

Options of the recipe.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `steps` [`[]uistep`](#uistep)

Steps contains all the steps with parameters to follow for the recipe.

##### `successfullMessage` `string`

successfullMessage is presented if present and success.

##### `targetIdentities` `[]string` [`required`]

TargetIdentities contains the list of identities the recipes will try to create.

##### `template` `string`

Template of the recipe to import.

##### `templateHash` `string` [`read_only`]

templateHash is a hash of the template.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### UIParameter

Represents a parameter that will be shown in the UI.

#### Example

```json
{
  "advanced": false,
  "key": "unique_key",
  "optional": false,
  "type": "String"
}
```

#### Attributes

##### `advanced` `boolean`

Defines if the parameter is an advanced one.

##### `allowedChoices` `map[string]string`

allowedChoices lists all the choices in case of an enum.

##### `allowedValues` `[]object`

List of values that can be used.

##### `defaultValue` `object`

Default value of the parameter.

##### `description` `string`

Description of the paramerter.

##### `key` `string` [`required`]

Key identifying the parameter.

##### `longDescription` `string`

Long explanation of the parameter.

##### `name` `string`

Name of the paramerter.

##### `optional` `boolean`

Defines if the parameter is optional.

##### `type` `emum(Boolean | Duration | Enum | IntegerSlice | Integer | Float | FloatSlice | Password | String | StringSlice | CVSSThreshold | JSON | TagsExpression)` [`required`]

The type of the parameter.

##### `validationFunction` `string`

ValidationFunction represents the function to validate the parameter.

##### `value` `object`

_This attribute is deprecated_.

Value of the parameter.

##### `visibilityCondition` `uiparametersexpression`

List of ors of ands of uiparametervisibility that must be verified for the
parameter to be displayed to the user.

### UIParameterVisibility

Represent a visibility condition for a uiparameter.

#### Example

```json
{
  "key": "enableThing",
  "operator": "Equal",
  "value": true
}
```

#### Attributes

##### `key` `string` [`required`]

Key holding the value to compare.

##### `operator` `emum(Equal | NotEqual | GreaterThan | LesserThan | Defined | Undefined)`

Operator to apply.

##### `value` `object` [`required`]

Values that must match the key.

### UIStep

Represents a parameter that will be shown in the UI.

#### Example

```json
{
  "advanced": false,
  "name": "General configuration"
}
```

#### Attributes

##### `advanced` `boolean`

Defines if the step is an advanced one.

##### `description` `string`

Description of the step.

##### `name` `string` [`required`]

Name of the step.

##### `parameters` [`[]uiparameter`](#uiparameter)

List of parameters for this step.

### ValidateUIParameter

This api validates a list of UIParameters.

#### Relations

##### `POST /validateuiparameters`

Validates some ui parameters.

#### Attributes

##### `errors` `map[string]string`

Errors contains the list of errors.

##### `parameters` [`[]uiparameter`](#uiparameter)

List of parameters to validate.

##### `values` `map[string]interface{}`

Values contains the computed values.

## `integration/app`

| Resource                      | Description                                          |
| -                             | -                                                    |
| [App](#app)                   | App represents an application that can be installed. |
| [Category](#category)         | Category allows to categorized services.             |
| [InstalledApp](#installedapp) | InstalledApps represents an installed application.   |
| [Log](#log)                   | Retrieves the log of a deployed app.                 |

### App

App represents an application that can be installed.

#### Example

```json
{
  "beta": false,
  "name": "the name"
}
```

#### Relations

##### `GET /apps`

Retrieves the list of apps.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

#### Attributes

##### `beta` `boolean` [`read_only`]

Beta indicates if the app is in a beta version.

##### `categoryID` `string` [`read_only`]

CategoryID of the app.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `icon` `string` [`read_only`]

Icon contains a base64 image for the app.

##### `latestVersion` `string`

LatestVersion represents the latest version available of the app.

##### `longDescription` `string`

LongDescription contains a more detailed description of the app.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `steps` [`[]uistep`](#uistep)

List of steps that contains parameters.

##### `title` `string`

Title represents the title of the app.

### Category

Category allows to categorized services.

#### Example

```json
{
  "name": "the name"
}
```

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

### InstalledApp

InstalledApps represents an installed application.

#### Example

```json
{
  "name": "the name",
  "protected": false,
  "status": "Unknown"
}
```

#### Relations

##### `GET /installedapps`

Retrieves the list of installed apps.

Parameters:

- `tag` (`string`): List of tags to filter on. This parameter is deprecated.
- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `POST /installedapps`

Installs a new app.

##### `DELETE /installedapps/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /installedapps/:id`

Retrieves the object with the given ID.

##### `PUT /installedapps/:id`

Updates the object with the given ID.

##### `GET /installedapps/:id/logs`

Returns the logs for a app.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `categoryID` `string` [`read_only`]

CategoryID of the app.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `currentVersion` `string`

Version of the installed app.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `parameters` `map[string]interface{}`

Parameters contains the computed parameters to start the app.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `status` `emum(Unknown | Deploying | Initializing | Running | Undeploying | Error)` [`read_only`]

Status of the app.

Default value:

```json
"Unknown"
```

##### `statusMessage` `string` [`read_only`]

Reason for the status of the app.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### Log

Retrieves the log of a deployed app.

#### Relations

##### `GET /installedapps/:id/logs`

Returns the logs for a app.

#### Attributes

##### `data` `map[string]string` [`autogenerated`,`read_only`]

Data contains all logs data.

## `integration/automation`

| Resource                                  | Description                                            |
| -                                         | -                                                      |
| [Automation](#automation)                 | An automation needs documentation.                     |
| [AutomationTemplate](#automationtemplate) | Templates that ca be used in automations.              |
| [Trigger](#trigger)                       | Trigger can be used to remotely trigger an automation. |

### Automation

An automation needs documentation.

#### Example

```json
{
  "condition": "function when(m, params) { return { continue: true }}",
  "disabled": false,
  "immediateExecution": false,
  "name": "the name",
  "protected": false,
  "tokenRenew": false,
  "trigger": "Time"
}
```

#### Relations

##### `GET /automations`

Retrieves the list of Automations.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `POST /automations`

Creates a new Automation.

##### `DELETE /automations/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /automations/:id`

Retrieves the object with the given ID.

##### `PUT /automations/:id`

Updates the object with the given ID.

##### `GET /automations/:id/triggers`

Allows a system to trigger the automation if its `triggerType` property is set
to `RemoteCall`.

##### `POST /automations/:id/triggers`

Allows a system to trigger the automation if its `triggerType` property is set
to `RemoteCall`.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `actions` `[]string`

Action contains the code that will be executed if the condition is met.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `condition` `string` [`required`]

Condition contains the code that will be executed to decide if any action should
be taken.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `entitlements` `_automation_entitlements`

Entitlements declares which operations are allowed on which identities.

##### `errors` `[]string` [`autogenerated`,`read_only`]

Error contains the eventual error of the last run.

##### `events` `_automation_events`

Events contains the identity and operation an event must have to trigger the
automation.

##### `immediateExecution` `boolean`

If set and the trigger is of type Time, the automation will be run at create or
update before being scheduled.

##### `lastExecTime` `time` [`autogenerated`,`read_only`]

LastExecTime holds the last successful execution tine.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `parameters` `map[string]interface{}`

Parameters contains the computed parameters.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `schedule` `string`

Schedule tells when to run the automation. Must be a valid CRON format. This
only applies if the trigger is set to Time.

##### `stdout` `string` [`autogenerated`,`read_only`]

Stdout contains the last run standard output.

##### `token` `string` [`autogenerated`]

Token holds the unique access token used as a password to trigger the
authentication. It will be visible only after creation.

##### `tokenRenew` `boolean`

If set to true a new token will be issued, and the previous one invalidated.

##### `trigger` `emum(Event | RemoteCall | Time)`

Trigger controls when the automation should be triggered.

Default value:

```json
"Time"
```

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### AutomationTemplate

Templates that ca be used in automations.

#### Example

```json
{
  "kind": "Condition",
  "name": "the name"
}
```

#### Relations

##### `GET /automationtemplates`

Retrieves the list of automation templates.

##### `GET /automationtemplates/:id`

Retrieves the object with the given ID.

#### Attributes

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `entitlements` `_automation_entitlements`

Entitlements contains the entitlements needed for executing the function.

##### `function` `string`

Function contains the code.

##### `key` `string`

Key contains the unique identifier key for the template.

##### `kind` `emum(Action | Condition)`

Kind represents the kind of template.

Default value:

```json
"Condition"
```

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `parameters` `map[string]interface{}`

Parameters contains the computed parameters.

##### `steps` [`[]uistep`](#uistep)

Steps contains all the steps with parameters.

### Trigger

Trigger can be used to remotely trigger an automation.

#### Relations

##### `GET /automations/:id/triggers`

Allows a system to trigger the automation if its `triggerType` property is set
to `RemoteCall`.

##### `POST /automations/:id/triggers`

Allows a system to trigger the automation if its `triggerType` property is set
to `RemoteCall`.

## `internal/x509`

| Resource              | Description             |
| -                     | -                       |
| [PKIXName](#pkixname) | Represents a PKIX.Name. |

### PKIXName

Represents a PKIX.Name.

#### Attributes

##### `commonName` `string`

Represents the CommonName field.

##### `country` `[]string`

Represents the Country field.

##### `locality` `[]string`

Represents the Locality field.

##### `organization` `[]string`

Represents the Organization field.

##### `organizationalUnit` `[]string`

Represents the OrganizationalUnit field.

##### `postalCode` `[]string`

Represents the PostalCode field.

##### `province` `[]string`

Represents the Province field.

##### `streetAddress` `[]string`

Represents the StreetAddress field.

## `policy/access`

| Resource                              | Description                                           |
| -                                     | -                                                     |
| [AccessReport](#accessreport)         | Access report represents any access made by the user. |
| [UserAccessPolicy](#useraccesspolicy) | The enforcer policy controls user access.             |

### AccessReport

Access report represents any access made by the user.

#### Example

```json
{
  "action": "Accept",
  "enforcerID": "xxx-xxx-xxx",
  "enforcerNamespace": "/my/namespace",
  "processingUnitID": "xxx-xxx-xxx-xxx",
  "processingUnitNamespace": "/my/ns",
  "type": "SSHLogin"
}
```

#### Relations

##### `POST /accessreports`

Create an access report.

#### Attributes

##### `action` `emum(Accept | Reject)` [`required`]

Action applied to the access.

##### `claimHash` `string`

Hash of the claims used to communicate.

##### `enforcerID` `string` [`required`]

Identifier of the enforcer.

##### `enforcerNamespace` `string` [`required`]

Namespace of the enforcer.

##### `processingUnitID` `string`

ID of the processing unit of the report.

##### `processingUnitNamespace` `string`

Namespace of the processing unit of the report.

##### `reason` `string`

This field is only set if 'action' is set to 'Reject' and specifies the reason
for the rejection.

##### `timestamp` `time`

Date of the report.

##### `type` `emum(SSHLogin | SSHLogout | SudoEnter | SudoExit)` [`required`]

Type of the report.

### UserAccessPolicy

The enforcer policy controls user access.

#### Example

```json
{
  "disabled": false,
  "name": "the name",
  "propagate": false,
  "protected": false
}
```

#### Relations

##### `GET /useraccesspolicies`

Retrieves the list of user access policies.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /useraccesspolicies`

Creates a new enforcer policy.

##### `DELETE /useraccesspolicies/:id`

Deletes the UserAccessPolicy with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /useraccesspolicies/:id`

Retrieves the UserAccessPolicy with the given ID.

Parameters:

- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `PUT /useraccesspolicies/:id`

Updates the UserAccessPolicy with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `activeDuration` `string` [`format=^[0-9]+[smh]$`]

ActiveDuration defines for how long the policy will be active according to the
activeSchedule.

##### `activeSchedule` `string`

ActiveSchedule defines when the policy should be active using the cron notation.
The policy will be active for the given activeDuration.

##### `allowedSudoUsers` `[]string`

AllowedSudoUsers indicates the list of user who can use sudo commands.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `expirationTime` `time`

If set the policy will be auto deleted after the given time.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `object` `[][]string`

Object contains the tag expression matching the enforcers the subject is allowed
to connect to.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `subject` `[][]string`

Subject contains the tag expression the tags need to match for the policy to
apply.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

## `policy/audit`

| Resource                                                | Description                                                                         |
| -                                                       | -                                                                                   |
| [AuditProfile](#auditprofile)                           | AuditProfile is an audit policy that consists of a set of audit rules. An audit     |
| [AuditProfileMappingPolicy](#auditprofilemappingpolicy) | Defines an audit policy that determine the sets of enforcers that must implement... |
| [AuditReport](#auditreport)                             | Post a new audit statistics report.                                                 |

### AuditProfile

AuditProfile is an audit policy that consists of a set of audit rules. An audit
policy will determine that types of events that must be captured in the kernel.

#### Example

```json
{
  "name": "the name",
  "propagate": false,
  "protected": false
}
```

#### Relations

##### `GET /auditprofiles`

Retrieves the list of audit profiles.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /auditprofiles`

Creates a new audit profile.

##### `DELETE /auditprofiles/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /auditprofiles/:id`

Retrieves the object with the given ID.

Parameters:

- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `PUT /auditprofiles/:id`

Updates the object with the given ID.

##### `GET /auditprofilemappingpolicies/:id/auditprofiles`

Returns the list of audit profiles that are referred by this policy.

##### `GET /enforcers/:id/auditprofiles`

Returns a list of the audit profiles that must be applied to this enforcer.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `rules` `_audit_profile_rule_list`

Rules is the list of audit policy rules associated with this policy.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### AuditProfileMappingPolicy

Defines an audit policy that determine the sets of enforcers that must implement
a specific audit profile.

#### Example

```json
{
  "disabled": false,
  "fallback": false,
  "name": "the name",
  "propagate": false,
  "protected": false
}
```

#### Relations

##### `GET /auditprofilemappingpolicies`

Retrieves the list of audit profile mapping policies.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /auditprofilemappingpolicies`

Creates a new audit profile mapping policy.

##### `DELETE /auditprofilemappingpolicies/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /auditprofilemappingpolicies/:id`

Retrieves the object with the given ID.

Parameters:

- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `PUT /auditprofilemappingpolicies/:id`

Updates the object with the given ID.

##### `GET /auditprofilemappingpolicies/:id/auditprofiles`

Returns the list of audit profiles that are referred by this policy.

##### `GET /auditprofilemappingpolicies/:id/enforcers`

Returns the list of enforcers that are affected by this poliy.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `activeDuration` `string` [`format=^[0-9]+[smh]$`]

ActiveDuration defines for how long the policy will be active according to the
activeSchedule.

##### `activeSchedule` `string`

ActiveSchedule defines when the policy should be active using the cron notation.
The policy will be active for the given activeDuration.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `fallback` `boolean`

Fallback indicates that this is fallback policy. It will only be
applied if no other policies have been resolved. If the policy is also
propagated it will become a fallback for children namespaces.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `object` `[][]string`

Object of the policy is the selector of the audit profiles that must be applied
based on this policy.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `subject` `[][]string`

Subject of the policy is a selector of the enforcers that must implement the
policy.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

### AuditReport

Post a new audit statistics report.

#### Example

```json
{
  "AUID": "xxx-xxx",
  "CWD": "/etc",
  "EXE": "/bin/ls",
  "a0": "xxx-xxx",
  "a1": "xxx-xxx",
  "a2": "xxx-xxx",
  "a3": "xxx-xxx",
  "arch": "x86_64",
  "auditProfileID": "xxx-xxx-xxx-xxx",
  "auditProfileNamespace": "/my/ns",
  "command": "ls",
  "enforcerID": "xxx-xxx-xxx-xxx",
  "enforcerNamespace": "/my/ns",
  "processingUnitID": "xxx-xxx-xxx-xxx",
  "processingUnitNamespace": "/my/ns",
  "recordType": "Syscall",
  "success": false,
  "syscall": "execve",
  "timestamp": "2018-06-14T23:10:46.420397985Z"
}
```

#### Relations

##### `POST /auditreports`

Create a audit statistics report.

#### Attributes

##### `AUID` `string`

The Audit User ID that is the loginID of the user.

##### `CWD` `string`

Command working directory.

##### `EGID` `integer`

Effective group ID of the user who started the analyzed process.

##### `EUID` `integer`

Effective user ID of the user who started the analyzed process.

##### `EXE` `string`

Path to the executable.

##### `FSGID` `integer`

File system group ID of the user who started the analyzed process.

##### `FSUID` `integer`

File system user ID of the user who started the analyzed process.

##### `FilePath` `string`

Full path of the file that was passed to the system call.

##### `GID` `integer`

Group ID of the user who started the analyzed process.

##### `PER` `integer`

File or directory permissions.

##### `PID` `integer`

PID of the executable.

##### `PPID` `integer`

PID of the parent executable.

##### `SGID` `integer`

Set group ID of the user who started the analyzed process.

##### `SUID` `integer`

Set user ID of the user who started the analyzed process.

##### `UID` `integer`

User ID.

##### `a0` `string`

First argument of the executed system call.

##### `a1` `string`

Second argument of the executed system call.

##### `a2` `string`

Third argument of the executed system call.

##### `a3` `string`

Fourth argument of the executed system call.

##### `arch` `string`

Architecture of the system of the monitored process.

##### `auditProfileID` `string` [`required`]

ID the audit profile that triggered the report.

##### `auditProfileNamespace` `string` [`required`]

Namespace the audit profile that triggered the report.

##### `command` `string`

Command issued.

##### `enforcerID` `string` [`required`]

ID of the enforcer reporting.

##### `enforcerNamespace` `string` [`required`]

Namespace of the enforcer reporting.

##### `exit` `integer`

Exit code of the executed system call.

##### `processingUnitID` `string` [`required`]

ID of the processing unit originating the report.

##### `processingUnitNamespace` `string` [`required`]

Namespace of the processing unit originating the report.

##### `recordType` `string` [`required`]

Type of Audit Record.

##### `sequence` `integer`

Needs documentation.

##### `success` `boolean`

Tells if the operation has been a success of a failure.

##### `syscall` `string`

Syscall executed.

##### `timestamp` `time` [`required`]

Date of the report.

## `policy/authorization`

| Resource                                          | Description                                                                    |
| -                                                 | -                                                                              |
| [APIAuthorizationPolicy](#apiauthorizationpolicy) | An API Authorization Policy defines what kind of operations a user of a system |
| [APICheck](#apicheck)                             | This API allows to verify is a client identitied by his token is allowed to do |
| [AppCredential](#appcredential)                   | Create a credential for an application.                                        |
| [Credential](#credential)                         | Represents an application credential data.                                     |
| [Role](#role)                                     | Roles returns the available roles that can be used with API Authorization      |

### APIAuthorizationPolicy

An API Authorization Policy defines what kind of operations a user of a system
can do in a namespace. The operations can be any combination of GET, POST, PUT,
DELETE,PATCH or HEAD. By default, an API Authorization Policy will only give
permissions in the context of the current namespace but you can make it
propagate to all the child namespaces. It is also possible restrict permissions
to apply only on a particular subset of the apis by setting the target
identities.

#### Example

```json
{
  "authorizedIdentities": [
    "@auth:role=namespace.editor"
  ],
  "authorizedNamespace": "/namespace",
  "disabled": false,
  "fallback": false,
  "name": "the name",
  "propagate": false,
  "propagationHidden": false,
  "protected": false
}
```

#### Relations

##### `GET /apiauthorizationpolicies`

Retrieves the list of API authorization policies.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /apiauthorizationpolicies`

Creates a new API authorization policies.

##### `DELETE /apiauthorizationpolicies/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /apiauthorizationpolicies/:id`

Retrieves the object with the given ID.

##### `PUT /apiauthorizationpolicies/:id`

Updates the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `activeDuration` `string` [`format=^[0-9]+[smh]$`]

ActiveDuration defines for how long the policy will be active according to the
activeSchedule.

##### `activeSchedule` `string`

ActiveSchedule defines when the policy should be active using the cron notation.
The policy will be active for the given activeDuration.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `authorizedIdentities` `[]string` [`required`]

AuthorizedIdentities defines the list of api identities the policy applies to.

##### `authorizedNamespace` `string` [`required`]

AuthorizedNamespace defines on what namespace the policy applies.

##### `authorizedSubnets` `[]string`

If set, the api authorization will only be valid if the request comes from one
the declared subnets.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `expirationTime` `time`

If set the policy will be auto deleted after the given time.

##### `fallback` `boolean`

Fallback indicates that this is fallback policy. It will only be
applied if no other policies have been resolved. If the policy is also
propagated it will become a fallback for children namespaces.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `propagationHidden` `boolean`

If set to true while the policy is propagating, it won't be visible to children
namespace, but still used for policy resolution.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `subject` `[][]string`

Subject is the subject.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

### APICheck

This API allows to verify is a client identitied by his token is allowed to do
some operations on some apis. For example, it allows third party system to
impersonate a user and ensure a proxfied request should be allowed.

#### Example

```json
{
  "namespace": "/namespace",
  "operation": "Create",
  "targetIdentities": [
    "processingunit",
    "enforcer"
  ],
  "token": "valid.jwt.token"
}
```

#### Relations

##### `POST /apichecks`

Verifies the authorizations on various identities for a given token.

#### Attributes

##### `authorized` `map[string]bool` [`autogenerated`,`read_only`]

Authorized contains the results of the check.

##### `claims` `[]string` [`read_only`]

Claims contains the decoded claims used.

##### `namespace` `string` [`required`]

Namespace is the namespace to use to check the api authentication.

##### `operation` `emum(Create | Delete | Info | Patch | Retrieve | RetrieveMany | Update)`

Operation is the operation you want to check.

##### `targetIdentities` `[]string` [`required`]

TargetIdentities contains the list of identities you want to check the
authorization.

##### `token` `string` [`required`]

Token is the token to use to check api authentication.

### AppCredential

Create a credential for an application.

#### Example

```json
{
  "CSR": "-----BEGIN CERTIFICATE REQUEST-----
MIICvDCCAaQCAQAwdzELMAkGA1UEBhMCVVMxDTALBgNVBAgMBFV0YWgxDzANBgNV
BAcMBkxpbmRvbjEWMBQGA1UECgwNRGlnaUNlcnQgSW5jLjERMA8GA1UECwwIRGln
aUNlcnQxHTAbBgNVBAMMFGV4YW1wbGUuZGlnaWNlcnQuY29tMIIBIjANBgkqhkiG
9w0BAQEFAAOCAQ8AMIIBCgKCAQEA8+To7d+2kPWeBv/orU3LVbJwDrSQbeKamCmo
wp5bqDxIwV20zqRb7APUOKYoVEFFOEQs6T6gImnIolhbiH6m4zgZ/CPvWBOkZc+c
1Po2EmvBz+AD5sBdT5kzGQA6NbWyZGldxRthNLOs1efOhdnWFuhI162qmcflgpiI
WDuwq4C9f+YkeJhNn9dF5+owm8cOQmDrV8NNdiTqin8q3qYAHHJRW28glJUCZkTZ
wIaSR6crBQ8TbYNE0dc+Caa3DOIkz1EOsHWzTx+n0zKfqcbgXi4DJx+C1bjptYPR
BPZL8DAeWuA8ebudVT44yEp82G96/Ggcf7F33xMxe0yc+Xa6owIDAQABoAAwDQYJ
KoZIhvcNAQEFBQADggEBAB0kcrFccSmFDmxox0Ne01UIqSsDqHgL+XmHTXJwre6D
hJSZwbvEtOK0G3+dr4Fs11WuUNt5qcLsx5a8uk4G6AKHMzuhLsJ7XZjgmQXGECpY
Q4mC3yT3ZoCGpIXbw+iP3lmEEXgaQL0Tx5LFl/okKbKYwIqNiyKWOMj7ZR/wxWg/
ZDGRs55xuoeLDJ/ZRFf9bI+IaCUd1YrfYcHIl3G87Av+r49YVwqRDT0VDV7uLgqn
29XI1PpVUNCPQGn9p/eX6Qo7vpDaPybRtA2R7XLKjQaF9oXWeCUqy1hvJac9QFO2
97Ob1alpHPoZ7mWiEuJwjBPii6a9M9G30nUo39lBi1w=
-----END CERTIFICATE REQUEST-----",
  "disabled": false,
  "name": "the name",
  "protected": false,
  "roles": [
    "@auth:role=enforcer",
    "@auth:role=kubesquall"
  ]
}
```

#### Relations

##### `GET /appcredentials`

Retrieves the list of application credentials.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `POST /appcredentials`

Creates a new application credential.

##### `DELETE /appcredentials/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /appcredentials/:id`

Retrieves the object with the given ID.

##### `PUT /appcredentials/:id`

Updates the object with the given ID.

#### Attributes

##### `CSR` `string`

CSR contains the Certificate Signing Request as a PEM encoded string. It can
only be set during a renew.

- The CN **MUST** be `app:credential:<appcred-id>:<appcred-name>`
- The O **MUST** be the namespace of the appcred

If you send anything else, the signing request will be rejected.

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `authorizedSubnets` `[]string`

If set, the it will only be valid if the request comes from one
the declared subnets.

##### `certificate` `string` [`read_only`]

The string representation of the Certificate used by the application.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `credentials` [`credential`](#credential) [`autogenerated`,`read_only`]

The credential data.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `email` `string`

The email address that will receive a copy of the application credentials.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `parentIDs` `[]string` [`autogenerated`,`read_only`]

Contains the ID of the parent Appcred if this is a derived appcred.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `roles` `[]string` [`required`]

List of roles to give the credentials.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### Credential

Represents an application credential data.

#### Attributes

##### `APIURL` `string`

The Aporeto API URL.

##### `ID` `string`

The ID of app credential.

##### `certificate` `string`

The certificate data encoded in base64.

##### `certificateAuthority` `string`

The certificate authority data encoded in base64.

##### `certificateKey` `string`

The certificate key data encoded in base64.

##### `name` `string`

The name of app credential.

##### `namespace` `string`

The namespace of app credential.

### Role

Roles returns the available roles that can be used with API Authorization
Policies.

#### Relations

##### `GET /roles`

Retrieves the list of existing roles.

#### Attributes

##### `authorizations` `map[string][]string` [`autogenerated`,`read_only`]

Authorizations of the role.

##### `description` `string` [`autogenerated`,`read_only`]

Description is the description of the role.

##### `key` `string` [`autogenerated`,`read_only`]

Key is the of the role.

##### `name` `string` [`autogenerated`,`read_only`]

Name of the role.

## `policy/enforcerconfig`

| Resource                                                      | Description                                                                         |
| -                                                             | -                                                                                   |
| [EnforcerProfile](#enforcerprofile)                           | Allows to create reusable configuration profile for your enforcers. Enforcer        |
| [EnforcerProfileMappingPolicy](#enforcerprofilemappingpolicy) | A Enforcer Profile Mapping Policy will tell what Enforcer Profile should be used... |
| [TrustedCA](#trustedca)                                       | Represents a trusted Certificate Authority.                                         |

### EnforcerProfile

Allows to create reusable configuration profile for your enforcers. Enforcer
Profiles contains various startup information that can (for some) be updated
live. Enforcer Profiles are assigned to some Enforcer using a Enforcer Profile
Mapping Policy.

#### Example

```json
{
  "kubernetesMetadataExtractor": "PodAtomic",
  "kubernetesSupportEnabled": false,
  "metadataExtractor": "Docker",
  "name": "the name",
  "propagate": false,
  "protected": false
}
```

#### Relations

##### `GET /enforcerprofiles`

Retrieves the list of enforcer profiles.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /enforcerprofiles`

Creates a new enforcer profile.

##### `DELETE /enforcerprofiles/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /enforcerprofiles/:id`

Retrieves the object with the given ID.

Parameters:

- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `PUT /enforcerprofiles/:id`

Updates the object with the given ID.

##### `GET /enforcerprofilemappingpolicies/:id/enforcerprofiles`

Returns the list of enforcer profiles that an enforcer profile mapping policy
matches.

##### `GET /enforcers/:id/enforcerprofiles`

Returns the enforcer profile that must be used by an enforcer.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `excludedInterfaces` `[]string`

ExcludedInterfaces is a list of interfaces that must be excluded.

##### `excludedNetworks` `[]string`

ExcludedNetworks is the list of networks that must be excluded for this
enforcer.

##### `ignoreExpression` `[][]string`

IgnoreExpression allows to set a tag expression that will make Aporeto to ignore
docker container started with labels matching the rule.

##### `kubernetesMetadataExtractor` `emum(KubeSquall | PodAtomic | PodContainers)`

_This attribute is deprecated_.

This field is kept for backward compatibility for enforcers <= 3.5.

Default value:

```json
"PodAtomic"
```

##### `kubernetesSupportEnabled` `boolean`

_This attribute is deprecated_.

This field is kept for backward compatibility for enforcers <= 3.5.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `metadataExtractor` `emum(Docker | ECS | Kubernetes)`

_This attribute is deprecated_.

This field is kept for backward compatibility for enforcers <= 3.5.

Default value:

```json
"Docker"
```

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `targetNetworks` `[]string`

TargetNetworks is the list of networks that authorization should be applied.

##### `targetUDPNetworks` `[]string`

TargetUDPNetworks is the list of UDP networks that authorization should be
applied.

##### `trustedCAs` `[]string`

List of trusted CA. If empty the main chain of trust will be used.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### EnforcerProfileMappingPolicy

A Enforcer Profile Mapping Policy will tell what Enforcer Profile should be used
by and Aporeto Agent based on the Enforcer that have been used during the
registration. The policy can also be propagated down to the child namespace.

#### Example

```json
{
  "disabled": false,
  "fallback": false,
  "name": "the name",
  "object": [
    [
      "a=a",
      "b=b"
    ],
    [
      "c=c"
    ]
  ],
  "propagate": false,
  "protected": false,
  "subject": [
    [
      "a=a",
      "b=b"
    ],
    [
      "c=c"
    ]
  ]
}
```

#### Relations

##### `GET /enforcerprofilemappingpolicies`

Retrieves the list of enforcer profile mapping policies.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /enforcerprofilemappingpolicies`

Creates a new enforcer profile mapping policies.

##### `DELETE /enforcerprofilemappingpolicies/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /enforcerprofilemappingpolicies/:id`

Retrieves the object with the given ID.

##### `PUT /enforcerprofilemappingpolicies/:id`

Updates the object with the given ID.

##### `GET /enforcerprofilemappingpolicies/:id/enforcerprofiles`

Returns the list of enforcer profiles that an enforcer profile mapping policy
matches.

##### `GET /enforcerprofilemappingpolicies/:id/enforcers`

Returns the list of enforcers affected by an enforcer profile mapping policy.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `fallback` `boolean`

Fallback indicates that this is fallback policy. It will only be
applied if no other policies have been resolved. If the policy is also
propagated it will become a fallback for children namespaces.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `object` `[][]string`

Object is the list of tags to use to find a enforcer profile.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `subject` `[][]string`

Subject is the subject of the policy.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

### TrustedCA

Represents a trusted Certificate Authority.

#### Relations

##### `GET /enforcers/:id/trustedcas`

Returns the list of CAs that should be trusted by this enforcer.

Parameters:

- `type` (`enum`): Type of certificate to get.

#### Attributes

##### `certificate` `string` [`autogenerated`,`read_only`]

The namespace X509 CA the enforcer should use.

##### `type` `emum(X509 | SSH)` [`autogenerated`,`read_only`]

Type of the CA.

## `policy/files`

| Resource                              | Description                                                                         |
| -                                     | -                                                                                   |
| [FileAccessPolicy](#fileaccesspolicy) | A File Access Policy allows Processing Units to access various folder and files.... |
| [FileAccessReport](#fileaccessreport) | Post a new file access statistics report.                                           |
| [FilePath](#filepath)                 | A File Path represents a random path to a file or a folder. They can be used in     |

### FileAccessPolicy

A File Access Policy allows Processing Units to access various folder and files.
It will use the tags of a File Path to know what is the path of the file or
folder to allow access to. You can allow the Processing Unit to have any
combination of read, write or execute.

When a Processing Unit is Docker container, then it will police the volumes
mount. executewon''t have any effect.

File path are not supported yet for standard Linux processes.

#### Example

```json
{
  "allowsExecute": false,
  "allowsRead": false,
  "allowsWrite": false,
  "disabled": false,
  "encryptionEnabled": false,
  "fallback": false,
  "logsEnabled": false,
  "name": "the name",
  "propagate": false,
  "protected": false
}
```

#### Relations

##### `GET /fileaccesspolicies`

Retrieves the list of file access policies.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /fileaccesspolicies`

Creates a new file access policies.

##### `DELETE /fileaccesspolicies/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /fileaccesspolicies/:id`

Retrieves the object with the given ID.

##### `PUT /fileaccesspolicies/:id`

Updates the object with the given ID.

##### `GET /fileaccesspolicies/:id/filepaths`

Returns the list of FilePaths that match the policy.

##### `GET /fileaccesspolicies/:id/processingunits`

Returns the list of ProcessingUnits that match the policy.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `activeDuration` `string` [`format=^[0-9]+[smh]$`]

ActiveDuration defines for how long the policy will be active according to the
activeSchedule.

##### `activeSchedule` `string`

ActiveSchedule defines when the policy should be active using the cron notation.
The policy will be active for the given activeDuration.

##### `allowsExecute` `boolean`

AllowsExecute allows to execute the files.

##### `allowsRead` `boolean`

AllowsRead allows to read the files.

##### `allowsWrite` `boolean`

AllowsWrite allows to write the files.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `encryptionEnabled` `boolean`

EncryptionEnabled will enable the automatic encryption.

##### `expirationTime` `time`

If set the policy will be auto deleted after the given time.

##### `fallback` `boolean`

Fallback indicates that this is fallback policy. It will only be
applied if no other policies have been resolved. If the policy is also
propagated it will become a fallback for children namespaces.

##### `logsEnabled` `boolean`

LogsEnabled will enable logging when this policy is used.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `object` `[][]string`

Object is the object of the policy.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `subject` `[][]string`

Subject is the subject of the policy.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

### FileAccessReport

Post a new file access statistics report.

#### Example

```json
{
  "action": "Accepted",
  "host": "localhost",
  "mode": "rxw",
  "path": "/etc/passwd",
  "processingUnitID": "xxx-xxx-xxx-xxx",
  "processingUnitNamespace": "/my/ns",
  "timestamp": "2018-06-14T23:10:46.420397985Z"
}
```

#### Relations

##### `POST /fileaccessreports`

Create a file access statistics report.

#### Attributes

##### `action` `emum(Accept | Reject | Limit)` [`required`]

Action taken.

##### `host` `string` [`required`]

Host of the file.

Default value:

```json
"localhost"
```

##### `mode` `string` [`required`]

Mode of the file access.

Default value:

```json
"rxw"
```

##### `path` `string` [`required`]

Path of the file.

Default value:

```json
"/etc/passwd"
```

##### `processingUnitID` `string` [`required`]

ID of the processing unit.

##### `processingUnitNamespace` `string` [`required`]

Namespace of the processing unit.

##### `timestamp` `time` [`required`]

Date of the report.

### FilePath

A File Path represents a random path to a file or a folder. They can be used in
aFile Access Policiesin order to allow Processing Units to access them, using
various modes (read, write, execute). You will need to use the File Paths tags
to set some policies. A good example would bevolume=web or file=/etc/passwd.

#### Example

```json
{
  "filepath": "/etc/passwd",
  "name": "the name",
  "propagate": false,
  "protected": false
}
```

#### Relations

##### `GET /filepaths`

Retrieves the list of file path.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `archived` (`boolean`): Also retrieve the objects that have been archived.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /filepaths`

Create a new file path.

##### `DELETE /filepaths/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /filepaths/:id`

Retrieves the object with the given ID.

Parameters:

- `archived` (`boolean`): Also retrieve the objects that have been archived.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `PUT /filepaths/:id`

Updates the object with the given ID.

##### `GET /fileaccesspolicies/:id/filepaths`

Returns the list of FilePaths that match the policy.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `filepath` `string` [`required`]

FilePath refer to the file mount path.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `server` `string` [`creation_only`]

server is the server name/ID/IP associated with the file path.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

## `policy/hooks`

| Resource                            | Description                                                                         |
| -                                   | -                                                                                   |
| [HookPolicy](#hookpolicy)           | Hook allows to to define hooks to the write operations in squall. Hooks are sent... |
| [RemoteProcessor](#remoteprocessor) | Hook to integrate an Aporeto service.                                               |

### HookPolicy

Hook allows to to define hooks to the write operations in squall. Hooks are sent
to an external Rufus server that will do the processing and eventually return a
modified version of the object before we save it.

#### Example

```json
{
  "certificateAuthority": "-----BEGIN CERTIFICATE-----
MIIBbjCCARSgAwIBAgIRANRbvVzTzBZOvMCb8BiKCLowCgYIKoZIzj0EAwIwJjEN
MAsGA1UEChMEQWNtZTEVMBMGA1UEAxMMQWNtZSBSb290IENBMB4XDTE4MDExNTE4
NDgwN1oXDTI3MTEyNDE4NDgwN1owJjENMAsGA1UEChMEQWNtZTEVMBMGA1UEAxMM
QWNtZSBSb290IENBMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEJ/80HR51+vau
7XH7zS7b8ABA0e/TdBOg1NznbnXdXil1tDvWloWuH5+/bbaiEg54wksJHFXaukw8
jhTLU7zT56MjMCEwDgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wCgYI
KoZIzj0EAwIDSAAwRQIhALwAZh2KLFFC1qfb5CqFHExlXS0PUltax9PvQCN9P0vl
AiBl7/st9u/JpERjJgirxJxOgKNlV6pq9ti75EfQtZZcQA==
-----END CERTIFICATE-----",
  "clientCertificate": "-----BEGIN CERTIFICATE-----
MIIBczCCARigAwIBAgIRALD3Vz81Pq10g7n4eAkOsCYwCgYIKoZIzj0EAwIwJjEN
MAsGA1UEChMEQWNtZTEVMBMGA1UEAxMMQWNtZSBSb290IENBMB4XDTE4MDExNzA2
NTM1MloXDTI3MTEyNjA2NTM1MlowGDEWMBQGA1UEAxMNY2xhaXJlLWNsaWVudDBZ
MBMGByqGSM49AgEGCCqGSM49AwEHA0IABOmzPJj+t25T148eQH5gVrZ7nHwckF5O
evJQ3CjSEMesjZ/u7cW8IBfXlxZKHxl91IEbbB3svci4c8pycUNZ2kujNTAzMA4G
A1UdDwEB/wQEAwIHgDATBgNVHSUEDDAKBggrBgEFBQcDAjAMBgNVHRMBAf8EAjAA
MAoGCCqGSM49BAMCA0kAMEYCIQCjAAmkQpTua0HR4q6jnePaFBp/JMXwTXTxzbV6
peGbBQIhAP+1OR8GFnn2PlacwHqWXHwkvy6CLPVikvgtwEdB6jH8
-----END CERTIFICATE-----",
  "clientCertificateKey": "-----BEGIN EC PRIVATE KEY-----
MHcCAQEEIGOXJI/123456789oamOu4tQAIKFdbyvkIJg9GME0mHzoAoGCCqGSM49
AwEHoUQDQgAE6bM8mP123456789AfmBWtnucfByQXk568lDcKNIQx6yNn+7txbwg
F9eXFkofGX3UgRtsHe123456789xQ1naSw==
-----END EC PRIVATE KEY-----",
  "continueOnError": false,
  "disabled": false,
  "endpoint": "https://hooks.hookserver.com/remoteprocessors",
  "fallback": false,
  "mode": "Pre",
  "name": "the name",
  "propagate": false,
  "propagationHidden": false,
  "protected": false,
  "subject": [
    [
      "$identity=processingunit"
    ]
  ]
}
```

#### Relations

##### `GET /hookpolicies`

Retrieves the list of hook policies.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /hookpolicies`

Creates a new hook policy.

##### `DELETE /hookpolicies/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /hookpolicies/:id`

Retrieves the object with the given ID.

##### `PUT /hookpolicies/:id`

Updates the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `certificateAuthority` `string`

CertificateAuthority contains the pem block of the certificate authority used by
the remote endpoint.

##### `clientCertificate` `string`

ClientCertificate contains the client certificate that will be used to connect
to the remote endpoint. If provided, the private key associated with this
certificate must
also be configured.

##### `clientCertificateKey` `string`

ClientCertificateKey contains the key associated to the clientCertificate. Must
be provided only when
ClientCertificate has been configured.

##### `continueOnError` `boolean`

If set to true and `mode` is in `Pre`, the request will be honored even if
calling the hook fails.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `endpoint` `string` [`required`]

Endpoint contains the full address of the remote processor endpoint.

##### `expirationTime` `time`

If set the policy will be auto deleted after the given time.

##### `fallback` `boolean`

Fallback indicates that this is fallback policy. It will only be
applied if no other policies have been resolved. If the policy is also
propagated it will become a fallback for children namespaces.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `mode` `emum(Both | Post | Pre)`

Mode define the type of the hook.

Default value:

```json
"Pre"
```

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `propagationHidden` `boolean`

If set to true while the policy is propagating, it won't be visible to children
namespace, but still used for policy resolution.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `subject` `[][]string`

Subject contains the tag expression that an object must match in order to
trigger the hook.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

### RemoteProcessor

Hook to integrate an Aporeto service.

#### Example

```json
{
  "claims": [
    "@auth:realm=certificate",
    "@auth:commonname=john"
  ],
  "input": "{
  \"name\": \"hello\",
  \"description\": \"hello\",
}",
  "mode": "Pre",
  "namespace": "/my/namespace",
  "operation": "create",
  "targetIdentity": "processingunit"
}
```

#### Relations

##### `POST /remoteprocessors`

This should be be here.

#### Attributes

##### `claims` `[]string` [`required`]

Represents the claims of the currently managed object.

##### `input` `json.RawMessage` [`required`]

Represents data received from the service.

##### `mode` `emum(Post | Pre)`

Node defines the type of the hook.

##### `namespace` `string` [`required`]

Represents the current namespace.

##### `operation` `elemental.Operation` [`required`]

Define the operation that is currently handled by the service.

##### `output` `_elemental_identifiable` [`autogenerated`,`read_only`]

Returns the OutputData filled with the processor information.

##### `requestID` `string`

RequestID gives the id of the request coming from the main server.

##### `targetIdentity` `string` [`required`]

Represents the Identity name of the managed object.

## `policy/hosts`

| Resource                                              | Description                                                              |
| -                                                     | -                                                                        |
| [HostService](#hostservice)                           | Represents a set of services that a host must expose and protect.        |
| [HostServiceMappingPolicy](#hostservicemappingpolicy) | Defines a host service mapping policy that provides the relation between |

### HostService

Represents a set of services that a host must expose and protect.

#### Example

```json
{
  "hostModeEnabled": false,
  "name": "the name",
  "propagate": false,
  "protected": false
}
```

#### Relations

##### `GET /hostservices`

Retrieves the list of host services.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /hostservices`

Creates a new host service.

##### `DELETE /hostservices/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /hostservices/:id`

Retrieves the object with the given ID.

Parameters:

- `archived` (`boolean`): Also retrieve the objects that have been archived.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `PUT /hostservices/:id`

Updates the object with the given ID.

##### `GET /enforcers/:id/hostservices`

Returns a list of the host services policies that apply to this enforcer.

Parameters:

- `appliedServices` (`boolean`): Valid when retrieved for a given enforcer and returns the applied services.
- `setServices` (`boolean`): Instructs the backend to cache the services that were resolved. services.

##### `GET /hostservicemappingpolicies/:id/hostservices`

Returns the list of host services that are referred by this policy.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `hostModeEnabled` `boolean`

HostModeEnabled forces the corresponding enforcers to enable complete host
protection. When this option is turned on, all incoming and outgoing flows will
be monitored. Flows will be allowed if and only if a network policy has been
created to allow the flow. The option applies to all enforcers that match the
subject constraints.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `services` `[]string`

Services lists all protocols and ports a service is running. A service entry can
be defined by a protocol and port '(tcp/80)', or range of protocol/port pairs
'(udp/80:100)'. If no protocol is provided, it is assumed to be TCP. Allowed
protocols are only tcp and udp.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### HostServiceMappingPolicy

Defines a host service mapping policy that provides the relation between
enforcers and host services that they must implement.

#### Example

```json
{
  "disabled": false,
  "fallback": false,
  "name": "the name",
  "propagate": false,
  "protected": false
}
```

#### Relations

##### `GET /hostservicemappingpolicies`

Retrieves the list of host service mapping policies.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /hostservicemappingpolicies`

Creates a new host service mapping policy.

##### `DELETE /hostservicemappingpolicies/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /hostservicemappingpolicies/:id`

Retrieves the object with the given ID.

Parameters:

- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `PUT /hostservicemappingpolicies/:id`

Updates the object with the given ID.

##### `GET /hostservicemappingpolicies/:id/enforcers`

Returns the list of enforcers that are affected by this poliy.

##### `GET /hostservicemappingpolicies/:id/hostservices`

Returns the list of host services that are referred by this policy.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `activeDuration` `string` [`format=^[0-9]+[smh]$`]

ActiveDuration defines for how long the policy will be active according to the
activeSchedule.

##### `activeSchedule` `string`

ActiveSchedule defines when the policy should be active using the cron notation.
The policy will be active for the given activeDuration.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `fallback` `boolean`

Fallback indicates that this is fallback policy. It will only be
applied if no other policies have been resolved. If the policy is also
propagated it will become a fallback for children namespaces.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `object` `[][]string`

Object of the policy is the selector for the host services that must be applied
to this enforcer.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `subject` `[][]string`

Subject of the policy is the selector of the enforcers that the list of host
services must apply to.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

## `policy/networking`

| Resource                                      | Description                                                                         |
| -                                             | -                                                                                   |
| [Claims](#claims)                             | This API represents the claims that accessed a service.                             |
| [ExternalNetwork](#externalnetwork)           | An External Network represents a random network or ip that is not managed by the... |
| [FlowReport](#flowreport)                     | Post a new flow statistics report.                                                  |
| [InfrastructurePolicy](#infrastructurepolicy) | Infrastructure policies capture the network access rules of the underlying          |
| [NetworkAccessPolicy](#networkaccesspolicy)   | Allows to define networking policies to allow or prevent processing units           |

### Claims

This API represents the claims that accessed a service.

#### Example

```json
{
  "content": {
    "exp": 1553899021,
    "iat": 1553888221,
    "iss": "https://accounts.acme.com",
    "sub": "alice@acme.com"
  },
  "hash": "1134423925458173049",
  "protected": false
}
```

#### Relations

##### `GET /claims`

Retrieves the list of claims.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `POST /claims`

Creates a new claims record.

##### `GET /claims/:id`

Retrieves the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `content` `map[string]string` [`creation_only`]

Content contains the raw JWT claims.

##### `hash` `string` [`required`]

XXH64 of the claims content. It will be used as ID. To compute a correct hash,
you must first clob Content as an string array in the form `key=value`, sort it
then apply the xxhash function.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### ExternalNetwork

An External Network represents a random network or ip that is not managed by the
system. They can be used in Network Access Policies in order to allow traffic
from or to the declared network or IP, using the provided protocol and port or
ports range. If you want to describe the Internet (ie. anywhere), use 0.0.0.0/0
as address, and 1-65000 for the ports. You will need to use the External
Services tags to set some policies.

#### Example

```json
{
  "name": "the name",
  "ports": [
    "1:65535"
  ],
  "propagate": false,
  "protected": false,
  "protocols": [
    "tcp"
  ]
}
```

#### Relations

##### `GET /externalnetworks`

Retrieves the list of external network.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `archived` (`boolean`): Also retrieve the objects that have been archived.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /externalnetworks`

Creates a new external network.

##### `DELETE /externalnetworks/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /externalnetworks/:id`

Retrieves the object with the given ID.

Parameters:

- `archived` (`boolean`): Also retrieve the objects that have been archived.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `PUT /externalnetworks/:id`

Updates the object with the given ID.

##### `GET /infrastructurepolicies/:id/externalnetworks`

Returns the list of external networks affected by an infrastructure policy.

Parameters:

- `mode` (`enum`): Matching mode.

##### `GET /networkaccesspolicies/:id/externalnetworks`

Returns the list of external networks affected by a network access policy.

Parameters:

- `mode` (`enum`): Matching mode.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `entries` `[]string`

List of CIDRs or domain name.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `ports` `[]string`

List of single ports or range (xx:yy).

Default value:

```json
[
  "1:65535"
]
```

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `protocols` `[]string`

List of protocols (tcp, udp, or protocol number).

Default value:

```json
[
  "tcp"
]
```

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### FlowReport

Post a new flow statistics report.

#### Example

```json
{
  "action": "Accept",
  "destinationID": "xxx-xxx-xxx",
  "destinationNamespace": "/my/namespace",
  "destinationType": "ProcessingUnit",
  "encrypted": false,
  "namespace": "/my/namespace",
  "observed": false,
  "observedAction": "NotApplicable",
  "observedEncrypted": false,
  "observedPolicyID": "xxx-xxx-xxx",
  "observedPolicyNamespace": "/my/namespace",
  "policyID": "xxx-xxx-xxx",
  "policyNamespace": "/my/namespace",
  "protocol": 6,
  "serviceType": "NotApplicable",
  "sourceID": "xxx-xxx-xxx",
  "sourceNamespace": "/my/namespace",
  "sourceType": "ProcessingUnit",
  "value": 1
}
```

#### Relations

##### `POST /flowreports`

Create a flow statistics report.

#### Attributes

##### `action` `emum(Accept | Reject)` [`required`]

Action applied to the flow.

##### `destinationID` `string` [`required`]

ID of the destination.

##### `destinationIP` `string`

Type of the destination.

##### `destinationNamespace` `string`

Namespace of the receiver.

##### `destinationPort` `integer`

Port of the destination.

##### `destinationType` `emum(ProcessingUnit | ExternalNetwork | Claims)` [`required`]

Type of the source.

##### `dropReason` `string`

This field is only set if 'action' is set to 'Reject' and specifies the reason
for the rejection.

##### `encrypted` `boolean`

Tells is the flow has been encrypted.

##### `namespace` `string` [`required`]

_This attribute is deprecated_.

This is here for backward compatibility.

##### `observed` `boolean`

Tells if the flow is from design mode.

##### `observedAction` `emum(Accept | Reject | NotApplicable)`

Action observed on the flow.

Default value:

```json
"NotApplicable"
```

##### `observedDropReason` `string`

This field is only set if 'observedAction' is set to 'Reject' and specifies the
reason for the rejection.

##### `observedEncrypted` `boolean`

Value of the encryption of the network policy that observed the flow.

##### `observedPolicyID` `string`

ID of the network policy that observed the flow.

##### `observedPolicyNamespace` `string`

Namespace of the network policy that observed the flow.

##### `policyID` `string` [`required`]

ID of the network policy that accepted the flow.

##### `policyNamespace` `string` [`required`]

Namespace of the network policy that accepted the flow.

##### `protocol` `integer` [`required`]

protocol number.

##### `serviceClaimHash` `string`

Hash of the claims used to communicate.

##### `serviceID` `string`

ID of the service.

##### `serviceNamespace` `string`

Service URL accessed.

##### `serviceType` `emum(L3 | HTTP | TCP | NotApplicable)`

ID of the service.

Default value:

```json
"NotApplicable"
```

##### `serviceURL` `string`

Service URL accessed.

##### `sourceID` `string` [`required`]

ID of the source.

##### `sourceIP` `string`

Type of the source.

##### `sourceNamespace` `string`

Namespace of the receiver.

##### `sourceType` `emum(ProcessingUnit | ExternalNetwork | Claims)` [`required`]

Type of the source.

##### `timestamp` `time`

Date of the report.

##### `value` `integer` [`required`]

Number of flows in the report.

### InfrastructurePolicy

Infrastructure policies capture the network access rules of the underlying
infrastructure and can be used to model cloud security groups, firewalls or
other ACL based mechanisms. They are not used in the identity-based network
authorization of Aporeto, but they can affect traffic flows in the underlying
infrastructure.

#### Example

```json
{
  "action": "Allow",
  "applyPolicyMode": "OutgoingTraffic",
  "disabled": false,
  "name": "the name",
  "protected": false
}
```

#### Relations

##### `GET /infrastructurepolicies`

Retrieves the list of infrastructure policies.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `POST /infrastructurepolicies`

Creates a new infrastructure policy.

##### `DELETE /infrastructurepolicies/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /infrastructurepolicies/:id`

Retrieves the object with the given ID.

##### `PUT /infrastructurepolicies/:id`

Updates the object with the given ID.

##### `GET /infrastructurepolicies/:id/externalnetworks`

Returns the list of external networks affected by an infrastructure policy.

Parameters:

- `mode` (`enum`): Matching mode.

##### `GET /infrastructurepolicies/:id/processingunits`

Returns the list of Processing Units affected by an infrastructure policy.

Parameters:

- `mode` (`enum`): Matching mode.

##### `GET /infrastructurepolicies/:id/services`

Returns the list of services affected by an infrastructure policy.

Parameters:

- `mode` (`enum`): Matching mode.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `action` `emum(Allow | Reject)`

Action defines the action to apply to a flow.

Default value:

```json
"Allow"
```

##### `activeDuration` `string` [`format=^[0-9]+[smh]$`]

ActiveDuration defines for how long the policy will be active according to the
activeSchedule.

##### `activeSchedule` `string`

ActiveSchedule defines when the policy should be active using the cron notation.
The policy will be active for the given activeDuration.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `applyPolicyMode` `emum(OutgoingTraffic | IncomingTraffic)`

applyPolicyMode determines if the policy has to be applied to the
outgoing traffic of a PU or the incoming traffic of a PU or in both directions.
Default is both directions.

Default value:

```json
"OutgoingTraffic"
```

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `expirationTime` `time`

If set the policy will be auto deleted after the given time.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `object` `[][]string`

Object of the policy.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `subject` `[][]string`

Subject of the policy.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

### NetworkAccessPolicy

Allows to define networking policies to allow or prevent processing units
identitied by their tags to talk to other processing units or external services
(also identified by their tags).

#### Example

```json
{
  "action": "Allow",
  "applyPolicyMode": "Bidirectional",
  "disabled": false,
  "encryptionEnabled": false,
  "fallback": false,
  "logsEnabled": false,
  "name": "the name",
  "negateObject": false,
  "negateSubject": false,
  "observationEnabled": false,
  "observedTrafficAction": "Continue",
  "propagate": false,
  "protected": false
}
```

#### Relations

##### `GET /networkaccesspolicies`

Retrieves the list of network access policies.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /networkaccesspolicies`

Creates a new network access policy.

##### `DELETE /networkaccesspolicies/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /networkaccesspolicies/:id`

Retrieves the object with the given ID.

Parameters:

- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `PUT /networkaccesspolicies/:id`

Updates the object with the given ID.

##### `GET /networkaccesspolicies/:id/externalnetworks`

Returns the list of external networks affected by a network access policy.

Parameters:

- `mode` (`enum`): Matching mode.

##### `GET /networkaccesspolicies/:id/processingunits`

Returns the list of Processing Units affected by a network access policy.

Parameters:

- `mode` (`enum`): Matching mode.

##### `GET /networkaccesspolicies/:id/services`

Returns the list of services affected by a network access policy.

Parameters:

- `mode` (`enum`): Matching mode.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `action` `emum(Allow | Reject | Continue)`

Action defines the action to apply to a flow.

Default value:

```json
"Allow"
```

##### `activeDuration` `string` [`format=^[0-9]+[smh]$`]

ActiveDuration defines for how long the policy will be active according to the
activeSchedule.

##### `activeSchedule` `string`

ActiveSchedule defines when the policy should be active using the cron notation.
The policy will be active for the given activeDuration.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `applyPolicyMode` `emum(OutgoingTraffic | IncomingTraffic | Bidirectional)`

applyPolicyMode determines if the policy has to be applied to the
outgoing traffic of a PU or the incoming traffic of a PU or in both directions.
Default is both directions.

Default value:

```json
"Bidirectional"
```

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `encryptionEnabled` `boolean`

EncryptionEnabled defines if the flow has to be encrypted.

##### `expirationTime` `time`

If set the policy will be auto deleted after the given time.

##### `fallback` `boolean`

Fallback indicates that this is fallback policy. It will only be
applied if no other policies have been resolved. If the policy is also
propagated it will become a fallback for children namespaces.

##### `logsEnabled` `boolean`

LogsEnabled defines if the flow has to be logged.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `negateObject` `boolean`

Setting this to true will invert the object to find what is not matching.

##### `negateSubject` `boolean`

Setting this to true will invert the subject to find what is not matching.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `object` `[][]string`

Object of the policy.

##### `observationEnabled` `boolean`

If set to true, the flow will be in observation mode.

##### `observedTrafficAction` `emum(Apply | Continue)`

If observationEnabled is set to true, this will be the final action taken on the
packets.

Default value:

```json
"Continue"
```

##### `ports` `[]string`

Represents the ports and protocols this policy applies to.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `subject` `[][]string`

Subject of the policy.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

## `policy/processingunits`

| Resource                                        | Description                                          |
| -                                               | -                                                    |
| [IsolationProfile](#isolationprofile)           | An IsolationProfile needs documentation.             |
| [ProcessingUnitPolicy](#processingunitpolicy)   | A ProcessingUnitPolicies needs a better description. |
| [ProcessingUnitService](#processingunitservice) | Represents a service attached to a processing unit.  |

### IsolationProfile

An IsolationProfile needs documentation.

#### Example

```json
{
  "name": "the name",
  "propagate": false,
  "protected": false
}
```

#### Relations

##### `GET /isolationprofiles`

Retrieves the list of isolation profiles.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /isolationprofiles`

Creates a new isolation profile.

##### `DELETE /isolationprofiles/:id`

Deletes the object with the given ID.

##### `GET /isolationprofiles/:id`

Retrieves the object with the given ID.

Parameters:

- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `PUT /isolationprofiles/:id`

Updates the object with the given ID.

##### `GET /processingunitpolicies/:id/isolationprofiles`

Returns the list of IsolationProfiles by a given processing unit policies.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `capabilitiesActions` `_cap_map`

CapabilitiesActions identifies the capabilities that should be added or removed
from the processing unit.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `defaultSyscallAction` `_syscall_action`

DefaultAction is the default action applied to all syscalls of this profile.
Default is "Allow".

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `syscallRules` `_syscall_rules`

SyscallRules is a list of syscall rules that identify actions for particular
syscalls.

##### `targetArchitectures` `_arch_list`

TargetArchitectures is the target processor architectures where this profile can
be applied. Default all.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### ProcessingUnitPolicy

A ProcessingUnitPolicies needs a better description.

#### Example

```json
{
  "action": "Delete",
  "disabled": false,
  "fallback": false,
  "name": "the name",
  "propagate": false,
  "protected": false
}
```

#### Relations

##### `GET /processingunitpolicies`

Retrieves the list of processing unit policies.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /processingunitpolicies`

Creates a new processing unit policy.

##### `DELETE /processingunitpolicies/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /processingunitpolicies/:id`

Retrieves the object with the given ID.

##### `PUT /processingunitpolicies/:id`

Updates the object with the given ID.

##### `GET /processingunitpolicies/:id/isolationprofiles`

Returns the list of IsolationProfiles by a given processing unit policies.

##### `GET /processingunitpolicies/:id/processingunits`

Returns the list of ProcessingUnits by a given processing unit policies.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `action` `emum(Delete | Enforce | LogCompliance | Reject | Snapshot | Stop)`

Action determines the action to take while enforcing the isolation profile.

##### `activeDuration` `string` [`format=^[0-9]+[smh]$`]

ActiveDuration defines for how long the policy will be active according to the
activeSchedule.

##### `activeSchedule` `string`

ActiveSchedule defines when the policy should be active using the cron notation.
The policy will be active for the given activeDuration.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `fallback` `boolean`

Fallback indicates that this is fallback policy. It will only be
applied if no other policies have been resolved. If the policy is also
propagated it will become a fallback for children namespaces.

##### `isolationProfileSelector` `[][]string`

IsolationProfileSelector are the profiles that must be applied when this policy
matches. Only applies to Enforce and LogCompliance actions.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `subject` `[][]string`

Subject defines the tag selectors that identitfy the processing units to which
this policy applies.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

### ProcessingUnitService

Represents a service attached to a processing unit.

#### Attributes

##### `ports` `string` [`read_only`]

_This attribute is deprecated_.

ports contains the list of allowed ports and ranges.

##### `protocol` `integer`

Protocol used by the service.

##### `targetPorts` `[]string`

List of single ports or range (xx:yy).

## `policy/quota`

| Resource                    | Description                                                               |
| -                           | -                                                                         |
| [QuotaPolicy](#quotapolicy) | Quotas Policies allows to set quotas on the number of objects that can be |

### QuotaPolicy

Quotas Policies allows to set quotas on the number of objects that can be
created in a namespace.

#### Example

```json
{
  "disabled": false,
  "fallback": false,
  "identities": [
    "processingunit",
    "enforcer"
  ],
  "name": "the name",
  "propagate": false,
  "propagationHidden": false,
  "protected": false,
  "targetNamespace": "/my/namespace"
}
```

#### Relations

##### `GET /quotapolicies`

Retrieves the list of quota policies.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /quotapolicies`

Creates a new quota policy.

##### `DELETE /quotapolicies/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /quotapolicies/:id`

Retrieves the object with the given ID.

##### `PUT /quotapolicies/:id`

Updates the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `expirationTime` `time`

If set the policy will be auto deleted after the given time.

##### `fallback` `boolean`

Fallback indicates that this is fallback policy. It will only be
applied if no other policies have been resolved. If the policy is also
propagated it will become a fallback for children namespaces.

##### `identities` `[]string` [`required`]

Identities contains the list of identity names where the quota will be applied.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `propagationHidden` `boolean`

If set to true while the policy is propagating, it won't be visible to children
namespace, but still used for policy resolution.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `quota` `integer`

Quota contains the maximum number of object matching the policy subject that can
be created.

##### `targetNamespace` `string` [`required`]

TargetNamespace contains the base namespace from where the count will be done.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

## `policy/services`

| Resource                                | Description                                                                         |
| -                                       | -                                                                                   |
| [ClaimMapping](#claimmapping)           | Represents a mapping from a claim name to an HTTP header.                           |
| [Endpoint](#endpoint)                   | Represents an HTTP endpoint.                                                        |
| [HTTPResourceSpec](#httpresourcespec)   | HTTPResourceSpec descibes an HTTP resource exposed by a service. These APIs         |
| [Service](#service)                     | A Service defines a generic service object at L4 or L7 that encapsulates the        |
| [ServiceDependency](#servicedependency) | Allows to define a service dependency where a set of processing units as defined... |
| [TokenScopePolicy](#tokenscopepolicy)   | The TokenScopePolicy defines a set of policies that allow customization of the      |

### ClaimMapping

Represents a mapping from a claim name to an HTTP header.

#### Example

```json
{
  "claimName": "email",
  "targetHTTPHeader": "X-Username"
}
```

#### Attributes

##### `claimName` `string` [`required`,`format=^[a-zA-Z0-9-_/*#&@\+\$~:]+$`]

Claim name is the name of the claim that must be mapped to an HTTP header.

##### `targetHTTPHeader` `string` [`required`,`format=^[a-zA-Z0-9-_/*#&@\+\$~:]+$`]

The target HTTP header where this claim name must be mapped.

### Endpoint

Represents an HTTP endpoint.

#### Example

```json
{
  "public": false
}
```

#### Attributes

##### `URI` `string`

URI of the exposed API.

##### `allowedScopes` `[][]string`

AllowedScopes authorized to access the API.

##### `methods` `[]string`

methods exposed to access the API.

##### `public` `boolean`

public defines if the api is public or not.

##### `scopes` `[]string` [`read_only`]

_This attribute is deprecated_.

Scopes is deprecated.

### HTTPResourceSpec

HTTPResourceSpec descibes an HTTP resource exposed by a service. These APIs
can be associated with one or more services.

#### Example

```json
{
  "name": "the name",
  "propagate": false,
  "protected": false
}
```

#### Relations

##### `GET /httpresourcespecs`

Retrieves the list of HTTP Resource specifications.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.
- `archived` (`boolean`): Also retrieve the objects that have been archived.

##### `POST /httpresourcespecs`

Creates a new HTTP Resource specification.

##### `DELETE /httpresourcespecs/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /httpresourcespecs/:id`

Retrieves the object with the given ID.

Parameters:

- `archived` (`boolean`): Also retrieve the objects that have been archived.

##### `PUT /httpresourcespecs/:id`

Updates the object with the given ID.

##### `GET /services/:id/httpresourcespecs`

Retrieves the HTTP Resource exposed by this service.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `endpoints` [`[]endpoint`](#endpoint)

EndPoints is a list of API endpoints that are exposed for the service.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### Service

A Service defines a generic service object at L4 or L7 that encapsulates the
description of a micro-service. A service exposes APIs and can be implemented
through third party entities (such as a cloud provider) or through  processing
units.

#### Example

```json
{
  "OIDCProviderURL": "https://accounts.google.com",
  "OIDCScopes": [
    "email",
    "profile"
  ],
  "TLSType": "Aporeto",
  "authorizationType": "None",
  "disabled": false,
  "exposedAPIs": [
    [
      "package=p1"
    ]
  ],
  "exposedPort": 443,
  "exposedServiceIsTLS": false,
  "external": false,
  "name": "the name",
  "port": 443,
  "protected": false,
  "publicApplicationPort": 443,
  "selectors": [
    [
      "$identity=processingunit"
    ]
  ],
  "type": "HTTP"
}
```

#### Relations

##### `GET /services`

Retrieves the list of Services.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `archived` (`boolean`): Also retrieve the objects that have been archived.

##### `POST /services`

Creates a new Service.

##### `DELETE /services/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /services/:id`

Retrieves the object with the given ID.

Parameters:

- `archived` (`boolean`): Also retrieve the objects that have been archived.

##### `PUT /services/:id`

Updates the object with the given ID.

##### `GET /infrastructurepolicies/:id/services`

Returns the list of services affected by an infrastructure policy.

Parameters:

- `mode` (`enum`): Matching mode.

##### `GET /networkaccesspolicies/:id/services`

Returns the list of services affected by a network access policy.

Parameters:

- `mode` (`enum`): Matching mode.

##### `GET /processingunits/:id/services`

Retrieves the services used by a processing unit.

##### `GET /servicedependencies/:id/services`

Returns the list of external services that are targets of service dependency.

##### `GET /services/:id/httpresourcespecs`

Retrieves the HTTP Resource exposed by this service.

##### `GET /services/:id/processingunits`

Retrieves the Processing Units that implement this service.

Parameters:

- `mode` (`enum`): Matching mode.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `IPs` `[]string`

IPs is the list of IP addresses where the service can be accessed.
This is an optional attribute and is only required if no host names are
provided.
The system will automatically resolve IP addresses from host names otherwise.

##### `JWTSigningCertificate` `string`

PEM encoded certificate that will be used to validate user JWT in HTTP requests.
This is an optional field, needed only if the `authorizationType`
is set to `JWT`.

##### `MTLSCertificateAuthority` `string`

PEM encoded Certificate Authority to use to verify client
certificates. This only applies if `authorizationType` is set to
`MTLS`. If it is not set, Aporeto's Public Signing Certificate Authority will
be used.

##### `OIDCCallbackURL` `string`

This is an advanced setting. Optional OIDC callback URL. If you don't set it,
Aporeto will autodiscover it. It will be
`https://<hosts[0]|IPs[0]>/.aporeto/oidc/callback`.

##### `OIDCClientID` `string`

OIDC Client ID. Only has effect if the `authorizationType` is set to `OIDC`.

##### `OIDCClientSecret` `string`

OIDC Client Secret. Only has effect if the `authorizationType` is set to `OIDC`.

##### `OIDCProviderURL` `string`

OIDC Provider URL. Only has effect if the `authorizationType` is set to `OIDC`.

##### `OIDCScopes` `[]string`

Configures the scopes you want to add to the OIDC provider. Only has effect if
`authorizationType` is set to `OIDC`.

##### `TLSCertificate` `string`

PEM encoded certificate to expose to the clients for TLS. Only has effect and
required if `TLSType` is set to `External`.

##### `TLSCertificateKey` `string`

PEM encoded certificate key associated to `TLSCertificate`. Only has effect and
required if `TLSType` is set to `External`.

##### `TLSType` `emum(Aporeto | LetsEncrypt | External | None)`

Set how to provide a server certificate to the service.

- `Aporeto`: Generate a certificate issued from Aporeto public CA.
- `LetsEncrypt`: Issue a certificate from letsencrypt.
- `External`: : Let you define your own certificate and key to use.
- `None`: : TLS is disabled (not recommended).

Default value:

```json
"Aporeto"
```

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `authorizationType` `emum(None | JWT | OIDC | MTLS)`

AuthorizationType defines the user authorization type that should be used.

- `None`: No auhtorization.
- `JWT`:  Configures a simple JWT verification from the HTTP `Auhorization`
Header
- `OIDC`: Configures OIDC authorization. You must then set `OIDCClientID`,
`OIDCClientSecret`, OIDCProviderURL`.
- `MTLS`: Configures Client Certificate authorization. Then you can optionaly
`MTLSCertificateAuthority` otherwise Aporeto Public Signing Certificate will be
used.

Default value:

```json
"None"
```

##### `claimsToHTTPHeaderMappings` [`[]claimmapping`](#claimmapping)

Defines a list of mappings between claims and
HTTP headers. When these mappings are defined, the enforcer will copy the
values of the claims to the corresponding HTTP headers.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `endpoints` [`[]endpoint`](#endpoint) [`read_only`]

Endpoints is a read only attribute that actually resolves the API
endpoints that the service is exposing. Only valid during policy rendering.

##### `exposedAPIs` `[][]string`

ExposedAPIs contains a tag expression that will determine which
APIs a service is exposing. The APIs can be defined as the RESTAPISpec or
similar specifications for other L7 protocols.

##### `exposedPort` `integer` [`required`,`max_value=65535.000000`]

ExposedPort is the port that the service can be accessed. Note that
this is different from the Port attribute that describes the port that the
service is actually listening. For example if a load balancer is used, the
ExposedPort is the port that the load balancer is listening for the service,
whereas the port that the implementation is listening can be different.

##### `exposedServiceIsTLS` `boolean`

ExposedServiceIsTLS indicates that the exposed service is TLS. This means that
the enforcer has to initiate a TLS session in order to forrward traffic to the
service.

Default value:

```json
false
```

##### `external` `boolean`

External is a boolean that indicates if this is an external service.

Default value:

```json
false
```

##### `hosts` `[]string`

Hosts are the names that the service can be accessed with.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `port` `integer` [`required`,`max_value=65535.000000`]

Port is the port that the implementation of the service is listening to and
it can be different than the exposedPorts describing the service. This is needed
for port mapping use cases where there is private and public ports.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `publicApplicationPort` `integer` [`max_value=65535.000000`]

PublicApplicationPort is a new virtual port that the service can
be accessed, using HTTPs. Since the enforcer transparently inserts TLS in the
application path, you might want to declare a new port where the enforcer
listens for TLS. However, the application does not need to be modified and
the enforcer will map the traffic to the correct application port. This useful
when an application is being accessed from a public network.

##### `redirectURLOnAuthorizationFailure` `string`

If this is set, the user will be redirected to that URL in case of any
authorization failure to let you chance to provide a nice message to the user.
The query parameter `?failure_message=<message>` will be added to that url
explaining the possible reasons of the failure.

##### `selectors` `[][]string`

Selectors contains the tag expression that an a processing unit
must match in order to implement this particular service.

##### `trustedCertificateAuthorities` `string`

PEM encoded Certificate Authorities to trust when additional hops are needed. It
must be set if the service must reach a Service marked as `external` or must go
through an additional TLS termination point like a L7 Load Balancer.

##### `type` `emum(HTTP | TCP | KubernetesSecrets | VaultSecrets)`

Type is the type of the service.

Default value:

```json
"HTTP"
```

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `zone` `integer` [`autogenerated`,`read_only`]

geographical zone. This is used for sharding and
georedundancy.

### ServiceDependency

Allows to define a service dependency where a set of processing units as defined
by their tags require access to specific services.

#### Example

```json
{
  "disabled": false,
  "fallback": false,
  "name": "the name",
  "propagate": false,
  "protected": false
}
```

#### Relations

##### `GET /servicedependencies`

Retrieves the list of service dependencies.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /servicedependencies`

Creates a new service dependency.

##### `DELETE /servicedependencies/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /servicedependencies/:id`

Retrieves the object with the given ID.

##### `PUT /servicedependencies/:id`

Updates the object with the given ID.

##### `GET /servicedependencies/:id/processingunits`

Returns the list of Processing Units that depend on an service.

##### `GET /servicedependencies/:id/services`

Returns the list of external services that are targets of service dependency.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `activeDuration` `string` [`format=^[0-9]+[smh]$`]

ActiveDuration defines for how long the policy will be active according to the
activeSchedule.

##### `activeSchedule` `string`

ActiveSchedule defines when the policy should be active using the cron notation.
The policy will be active for the given activeDuration.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `fallback` `boolean`

Fallback indicates that this is fallback policy. It will only be
applied if no other policies have been resolved. If the policy is also
propagated it will become a fallback for children namespaces.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `object` `[][]string`

Object of the policy.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `subject` `[][]string`

Subject of the policy.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

### TokenScopePolicy

The TokenScopePolicy defines a set of policies that allow customization of the
authorization tokens issued by the Aporeto service. This allows Aporeto
generated tokens to be used by external applications.

#### Example

```json
{
  "disabled": false,
  "fallback": false,
  "name": "the name",
  "propagate": false,
  "protected": false
}
```

#### Relations

##### `GET /tokenscopepolicies`

Retrieves the list of token scope policies.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /tokenscopepolicies`

Creates a new token scope policy.

##### `DELETE /tokenscopepolicies/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /tokenscopepolicies/:id`

Retrieves the object with the given ID.

##### `PUT /tokenscopepolicies/:id`

Updates the object with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `activeDuration` `string` [`format=^[0-9]+[smh]$`]

ActiveDuration defines for how long the policy will be active according to the
activeSchedule.

##### `activeSchedule` `string`

ActiveSchedule defines when the policy should be active using the cron notation.
The policy will be active for the given activeDuration.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `assignedScopes` `[]string`

AssignedScopes is the the list of scopes that the policiy will assigns.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `expirationTime` `time`

If set the policy will be auto deleted after the given time.

##### `fallback` `boolean`

Fallback indicates that this is fallback policy. It will only be
applied if no other policies have been resolved. If the policy is also
propagated it will become a fallback for children namespaces.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `subject` `[][]string`

Subject defines the selection criteria that this policy must match on identiy
and scope request information.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

## `policy/ssh`

| Resource                                          | Description                                                                         |
| -                                                 | -                                                                                   |
| [SSHAuthorizationPolicy](#sshauthorizationpolicy) | An SSHAuthorizationPolicy allows to define the permissions for the owner            |
| [SSHIdentity](#sshidentity)                       | Returns a SSH certificate containing the bearer claims. This SSH Certificate can... |

### SSHAuthorizationPolicy

An SSHAuthorizationPolicy allows to define the permissions for the owner
of a SSH Identity Certificate. You can define if a user with some claims
can connect to an sshd server managed by an instance of enforcerd according
to its tags, what permissions he has and for how long delivered
certificates are valid.

#### Example

```json
{
  "disabled": false,
  "fallback": false,
  "name": "the name",
  "propagate": false,
  "protected": false,
  "validity": "1h"
}
```

#### Relations

##### `GET /sshauthorizationpolicies`

Retrieves the list of SSH authorization policies.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /sshauthorizationpolicies`

Creates a new SSH authorization policies.

##### `DELETE /sshauthorizationpolicies/:id`

Deletes the SSHAuthorizationPolicy with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /sshauthorizationpolicies/:id`

Retrieves the SSHAuthorizationPolicy with the given ID.

Parameters:

- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `PUT /sshauthorizationpolicies/:id`

Updates the SSHAuthorizationPolicy with the given ID.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

ID is the identifier of the object.

##### `activeDuration` `string` [`format=^[0-9]+[smh]$`]

ActiveDuration defines for how long the policy will be active according to the
activeSchedule.

##### `activeSchedule` `string`

ActiveSchedule defines when the policy should be active using the cron notation.
The policy will be active for the given activeDuration.

##### `annotations` `map[string][]string`

Annotation stores additional information about an entity.

##### `associatedTags` `[]string`

AssociatedTags are the list of tags attached to an entity.

##### `authorizedSubnets` `[]string`

If set, the api authorization will only be valid if the request comes from one
the declared subnets.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description is the description of the object.

##### `disabled` `boolean`

Disabled defines if the propert is disabled.

##### `expirationTime` `time`

If set the policy will be auto deleted after the given time.

##### `extensions` `[]string`

The list of SSH permissions to apply to SSH certificate. You can check the list
of standard extensions at
<https://github.com/openssh/openssh-portable/blob/38e83e4f219c752ebb1560633b73f06f0392018b/PROTOCOL.certkeys#L281>.

##### `fallback` `boolean`

Fallback indicates that this is fallback policy. It will only be
applied if no other policies have been resolved. If the policy is also
propagated it will become a fallback for children namespaces.

##### `forceCommand` `string`

If set, this will configure the `force-command` option in the SSH Certificate.
More info can be found at
<https://github.com/openssh/openssh-portable/blob/38e83e4f219c752ebb1560633b73f06f0392018b/PROTOCOL.certkeys#L249>.

##### `metadata` `[]string` [`creation_only`]

Metadata contains tags that can only be set during creation. They must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name is the name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

NormalizedTags contains the list of normalized tags of the entities.

##### `object` `[][]string`

Object contains the tag expression matching the enforcers the subject is allowed
to connect to.

##### `principals` `[]string`

You can set some principals that will be applied to delivered certificate. If
not
set, the user's claim Subject will be used.

##### `propagate` `boolean`

Propagate will propagate the policy to all of its children.

##### `protected` `boolean`

Protected defines if the object is protected.

##### `subject` `[][]string`

Subject contains the tag expression the authentication claims need to match for
the policy to apply.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

##### `validity` `string`

Set the validity of the delivered SSH certificate.

Default value:

```json
"1h"
```

### SSHIdentity

Returns a SSH certificate containing the bearer claims. This SSH Certificate can
be used to connect to a node where enforcer is protecting SSH sessions.

#### Example

```json
{
  "publicKey": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCytT my key"
}
```

#### Relations

##### `POST /sshidentities`

Creates a new SSH Identity Certificate.

#### Attributes

##### `certificate` `string` [`autogenerated`,`read_only`]

Contains the signed SSH certificate in OpenSSH Format.

##### `publicKey` `string` [`required`]

Contains the public key to sign in OpenSSH Format. You can generate a SSH public
key with the standard `ssh-keygen` tool.

## `recipes`

| Resource                        | Description                  |
| -                               | -                            |
| [RecipeOptions](#recipeoptions) | Represents a Recipe Options. |

### RecipeOptions

Represents a Recipe Options.

#### Example

```json
{
  "appCrendentialFormat": "JSON"
}
```

#### Attributes

##### `appCrendentialFormat` `emum(JSON | YAML)`

AppCrendentialFormat indicates the format of the AppCredential.

Default value:

```json
"JSON"
```

## `visualization/depmaps`

| Resource                            | Description                                                                         |
| -                                   | -                                                                                   |
| [DependencyMap](#dependencymap)     | This api returns a data structure representing the graph of all processing units... |
| [GraphEdge](#graphedge)             | Represents an edge from the dependency map.                                         |
| [GraphGroup](#graphgroup)           | Represents an group of nodes from the dependency map.                               |
| [GraphNode](#graphnode)             | Represents an node from the dependency map.                                         |
| [GraphPolicyInfo](#graphpolicyinfo) | Represents a policy information.                                                    |
| [IPInfo](#ipinfo)                   | This apis allows to resolve information from an IP address.                         |
| [PolicyGraph](#policygraph)         | This api returns a data structure representing the policy graph of all selected     |
| [SuggestedPolicy](#suggestedpolicy) | Allows to get policy suggestions.                                                   |

### DependencyMap

This api returns a data structure representing the graph of all processing units
and their connections in a particular namespace, in a given time window. To pass
the time window you can use the query parameters 'startAbsolute', 'endAbsolute',
'startRelative', 'endRelative'.

For example
  "/dependencymaps?startAbsolute=1489132800000&endAbsolute=1489219200000".

#### Relations

##### `GET /dependencymaps`

Retrieves the dependencymap of a namespace.

Parameters:

- `tag` (`string`): Only show objects with the given tags in the dependency map.
- `view` (`string`): Set the view query for grouping the dependency map.
- `viewSuggestions` (`boolean`): Also return the view suggestions.
- `endAbsolute` (`time`): Set the absolute end of the time window.
- `endRelative` (`duration`): Set the relative end of the time window.
- `startAbsolute` (`time`): Set the absolute start of the time window.
- `startRelative` (`duration`): Set the relative start of the time window.
- `flowOffset` (`duration`): Apply an offset to the time window for flows.

Mandatory Parameters

(`endRelative`) or (`startRelative`) or (`startRelative` and `endRelative`) or (`startRelative` and `endAbsolute`) or (`startAbsolute` and `endRelative`) or (`startAbsolute` and `endAbsolute`)

#### Attributes

##### `edges` [`map[string]graphedge`](#graphedge) [`read_only`]

edges are the edges of the map.

##### `groups` [`map[string]graphgroup`](#graphgroup) [`read_only`]

Groups provide information about the group values.

##### `nodes` [`map[string]graphnode`](#graphnode) [`read_only`]

nodes refers to the nodes of the map.

##### `viewSuggestions` `[]string` [`read_only`]

viewSuggestions provides suggestion of views based on relevant tags.

### GraphEdge

Represents an edge from the dependency map.

#### Example

```json
{
  "destinationType": "ProcessingUnit",
  "sourceType": "ProcessingUnit"
}
```

#### Attributes

##### `ID` `string`

Identifier of the edge.

##### `acceptedFlows` `integer`

Number of accepted flows in the edge.

##### `destinationID` `string`

ID of the destination GraphNode of the edge.

##### `destinationType` `emum(ProcessingUnit | ExternalNetwork | Node)`

Type of the destination GraphNode of the edge.

##### `encrypted` `integer`

Tells the number of encrypted flows in the edge.

##### `observedAcceptedFlows` `integer`

Number of accepted observed flows.

##### `observedEncrypted` `integer`

Number of encrypted observed flows.

##### `observedPolicyIDs` [`map[string]graphpolicyinfo`](#graphpolicyinfo)

Information about the observation policies that was hit in the flows
represented by that edge.

##### `observedRejectedFlows` `integer`

Number of rejected observed flows.

##### `observedServiceIDs` `map[string]int`

Map of ints...

##### `policyIDs` [`map[string]graphpolicyinfo`](#graphpolicyinfo)

Information about the policies that was hit in the flows represented by that
edge.

##### `rejectedFlows` `integer`

Number of rejected flows in the edge.

##### `sourceID` `string`

ID of the source GraphNode of the edge.

##### `sourceType` `emum(ProcessingUnit | ExternalNetwork | Node)`

Type of the source GraphNode of the edge.

### GraphGroup

Represents an group of nodes from the dependency map.

#### Attributes

##### `ID` `string`

Identifier of the group.

##### `color` `string`

Color to use for the group.

##### `match` `[][]string`

List of tag that was used to create this group.

##### `name` `string`

Name of the group.

##### `parentID` `string`

ID of the parent group if any.

### GraphNode

Represents an node from the dependency map.

#### Example

```json
{
  "type": "Docker",
  "unreachable": false
}
```

#### Attributes

##### `ID` `string`

Identifier of object represented by the node.

##### `enforcementStatus` `string`

Enforcement status of processing unit represented by the node.

##### `groupID` `string`

ID of the group the node is eventually part of.

##### `images` `[]string`

List of images.

##### `lastUpdate` `time`

Last update of the node.

##### `name` `string`

Name of object represented by the node.

##### `namespace` `string`

Namespace of object represented by the node.

##### `status` `string`

Status of object represented by the node.

##### `type` `emum(Docker | ExternalNetwork | Volume | Claim | Node)`

Type of object represented by the node.

##### `unreachable` `boolean`

If true the node is marked as unreachable.

##### `vulnerabilityLevel` `string`

Tags of object represented by the node.

### GraphPolicyInfo

Represents a policy information.

#### Attributes

##### `count` `integer`

Number of time the policy has been hit.

##### `namespace` `string`

Namespace of the policy.

### IPInfo

This apis allows to resolve information from an IP address.

#### Relations

##### `GET /ipinfos`

Returns information about an IP address given as parameters.

Parameters:

- `ip` (`string`): List of IPs to resolve.

Mandatory Parameters

`ip`

#### Attributes

##### `IP` `string` [`autogenerated`,`read_only`]

The IP resolved.

##### `error` `string` [`autogenerated`,`read_only`]

Eventual error that happened during resolution.

##### `records` `map[string]string` [`autogenerated`,`read_only`]

List of DNS records associated to that IP.

### PolicyGraph

This api returns a data structure representing the policy graph of all selected
processing units and their possible connectivity based on the current policies
associated with the namespace. Users can define a selector of processing units
for which theyare interestedor define the identity tags of a virtual processing
unit that is not yetactivated.

#### Example

```json
{
  "policyType": "Authorization",
  "selectors": [
    [
      "$identity=processingunit"
    ]
  ]
}
```

#### Relations

##### `POST /policygraphs`

Retrieve a policy graph.

Parameters:

- `view` (`string`): Set the view query for grouping the dependency map.

#### Attributes

##### `PUIdentity` `[]string`

puIdentity is the set of tags that a future activated PU will have for which the
user wants to evaluate policies and understand its connectivity options.

##### `dependencyMap` [`dependencymap`](#dependencymap)

The dependencyMap contains the output of the policy evalation, and it is the
same
type of dependency map as created by other APIs.

##### `policyType` `emum(Authorization | Infrastructure | Combined)`

Defines the type of policy that should be analyzed (Network Authorzation
Policies, Infrastructure Policies or Combined).

Default value:

```json
"Authorization"
```

##### `selectors` `[][]string`

Selectors contains the tag expression that an a processing unit
must match in order to evaluate policy for it.

### SuggestedPolicy

Allows to get policy suggestions.

#### Relations

##### `GET /suggestedpolicies`

Retrieves a list of network policy suggestion.

Parameters:

- `filterAction` (`enum`): Action to take with the filter tags.
- `filterTags` (`string`): Tags to filter in the policy suggestions.
- `endAbsolute` (`time`): Set the absolute end of the time window.
- `endRelative` (`duration`): Set the relative end of the time window.
- `startAbsolute` (`time`): Set the absolute start of the time window.
- `startRelative` (`duration`): Set the relative start of the time window.
- `flowOffset` (`duration`): Apply an offset to the time window for flows.

Mandatory Parameters

(`endRelative`) or (`startRelative`) or (`startRelative` and `endRelative`) or (`startRelative` and `endAbsolute`) or (`startAbsolute` and `endRelative`) or (`startAbsolute` and `endAbsolute`)

#### Attributes

##### `networkAccessPolicies` [`[]networkaccesspolicy`](#networkaccesspolicy)

List of suggested network access policies.

## `visualization/statsquery`

| Resource                                          | Description                                                                    |
| -                                                 | -                                                                              |
| [StatsInfo](#statsinfo)                           | StatsInfo API can be used to list the fields and tags available in a           |
| [StatsQuery](#statsquery)                         | StatsQuery is a generic API to retrieve time series data stored by the Aporeto |
| [TimeSeriesQueryResults](#timeseriesqueryresults) | Represent the results of a stats query.                                        |
| [TimeSeriesRow](#timeseriesrow)                   | Represent a time series row.                                                   |

### StatsInfo

StatsInfo API can be used to list the fields and tags available in a
statistics measurement.

#### Example

```json
{
  "measurement": "Flows"
}
```

#### Relations

##### `POST /statsinfo`

Retrieves information about the content of the stats measurement.

#### Attributes

##### `fields` `map[string]string` [`autogenerated`,`read_only`]

Contains the list of fields. You cannot group by these fields.

##### `measurement` `emum(Flows | Audit | Enforcers | Files | EventLogs | Counters | Accesses)`

Name of the measurement.

Default value:

```json
"Flows"
```

##### `tags` `[]string` [`autogenerated`,`read_only`]

Contains the list of tags. You can group by these tags.

### StatsQuery

StatsQuery is a generic API to retrieve time series data stored by the Aporeto
system. The API allows different types of queries that are all protected within
the namespace of the user.

#### Example

```json
{
  "descending": false,
  "limit": -1,
  "measurement": "Flows",
  "offset": -1
}
```

#### Relations

##### `POST /statsqueries`

Sends a query on statistical data.

Parameters:

- `endAbsolute` (`time`): Set the absolute end of the time window.
- `endRelative` (`duration`): Set the relative end of the time window.
- `startAbsolute` (`time`): Set the absolute start of the time window.
- `startRelative` (`duration`): Set the relative start of the time window.
- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

Mandatory Parameters

(`endRelative`) or (`startRelative`) or (`startRelative` and `endRelative`) or (`startRelative` and `endAbsolute`) or (`startAbsolute` and `endRelative`) or (`startAbsolute` and `endAbsolute`)

#### Attributes

##### `descending` `boolean`

If set, the results will be order by time from the most recent to the oldest.

##### `fields` `[]string`

List of fields to extract. If you don't pass anything, all available fields will
be returned. It is also possible to use function like `sum(value)`.

##### `filter` `string`

Apply a filter to the query.

##### `groups` `[]string`

Group results by the provided values. Note that not all fields can be used to
group the results.

##### `limit` `integer`

Limits the number of results. -1 means no limit.

Default value:

```json
-1
```

##### `measurement` `emum(Flows | Audit | Enforcers | Files | EventLogs | Packets | EnforcerTraces | Counters | Accesses)`

Name of the measurement.

Default value:

```json
"Flows"
```

##### `offset` `integer`

Offsets the of results. -1 means no offset.

Default value:

```json
-1
```

##### `results` [`[]timeseriesqueryresults`](#timeseriesqueryresults) [`autogenerated`,`read_only`]

Results contains the result of the query.

### TimeSeriesQueryResults

Represent the results of a stats query.

#### Attributes

##### `rows` [`[]timeseriesrow`](#timeseriesrow)

List of rows.

### TimeSeriesRow

Represent a time series row.

#### Attributes

##### `columns` `[]string`

colums of the row.

##### `name` `string`

the name of row.

##### `tags` `map[string]string`

List of tags.

##### `values` `[][]interface{}`

List of tags.

## `workflow`

| Resource                          | Description                                              |
| -                                 | -                                                        |
| [RenderTemplate](#rendertemplate) | A RenderTemplate cooks a template based some parameters. |

### RenderTemplate

A RenderTemplate cooks a template based some parameters.

#### Relations

##### `POST /rendertemplates`

Renders a new template.

#### Attributes

##### `output` `string`

Output holds the rendered template.

##### `parameters` `map[string]interface{}`

Parameters contains the computed parameters.

##### `template` `string`

Template of the recipe.
